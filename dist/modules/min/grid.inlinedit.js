var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,g,t){if(t.get||t.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[g]=t.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var g=0;return $jscomp.iteratorPrototype(function(){return g<a.length?{done:!1,value:a[g++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(a,g){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var t=0,e={next:function(){if(t<a.length){var u=t++;return{value:g(u,a[u]),done:!1}}e.next=function(){return{done:!0,value:void 0}};return e.next()}};e[Symbol.iterator]=function(){return e};return e};
$jscomp.polyfill=function(a,g,t,e){if(g){t=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var u=a[e];u in t||(t[u]={});t=t[u]}a=a[a.length-1];e=t[a];g=g(e);g!=e&&null!=g&&$jscomp.defineProperty(t,a,{configurable:!0,writable:!0,value:g})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");
$jscomp.findInternal=function(a,g,t){a instanceof String&&(a=String(a));for(var e=a.length,u=0;u<e;u++){var D=a[u];if(g.call(t,D,u,a))return{i:u,v:D}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,t){return $jscomp.findInternal(this,a,t).v}},"es6-impl","es3");
(function(a){"function"===typeof define&&define.amd?define(["jquery","./grid.base","./jquery.fmatter","./grid.common"],a):"object"===typeof exports?a(require("jquery")):a(jQuery)})(function(a){var g=a.jgrid,t=g.fullBoolFeedback,e=g.hasOneFromClasses,u=a.fn.jqGrid,D=function(a){return u.getGuiStyles.call(this,"states."+a)},F=function(d){var f=a.makeArray(arguments).slice(1);f.unshift("");f.unshift("Inline");f.unshift(d);return g.feedback.apply(this,f)};g.inlineEdit=g.inlineEdit||{};g.extend({editRow:function(d,
f,p,l,c,v,e,B,m,b){var h={},n=a.makeArray(arguments).slice(1);"object"===a.type(n[0])?h=n[0]:(void 0!==f&&(h.keys=f),a.isFunction(p)&&(h.oneditfunc=p),a.isFunction(l)&&(h.successfunc=l),void 0!==c&&(h.url=c),null!=v&&(h.extraparam=v),a.isFunction(e)&&(h.aftersavefunc=e),a.isFunction(B)&&(h.errorfunc=B),a.isFunction(m)&&(h.afterrestorefunc=m),a.isFunction(b)&&(h.beforeEditRow=b));return this.each(function(){var b=this,c=a(b),l=b.p,v=0,f=null,p={},m=l.colModel,e=l.prmNames;if(b.grid){var x=a.extend(!0,
{keys:!1,oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,beforeEditRow:null,mtype:"POST",focusField:!0},g.inlineEdit,l.inlineEditing||{},h),r=c.jqGrid("getInd",d,!0),n=x.focusField,B="object"===typeof n&&null!=n?a(n.target||n).closest("tr.jqgrow>td")[0]:null;if(!1!==r&&(x.extraparam[e.oper]===e.addoper||F.call(b,x,"beforeEditRow",x,d))&&"0"===(a(r).attr("editable")||"0")&&!a(r).hasClass("not-editable-row")){e=g.detectRowEditing.call(b,
d);if(null!=e&&"cellEditing"===e.mode){var e=e.savedRow,G=b.rows[e.id],u=D.call(b,"select");c.jqGrid("restoreCell",e.id,e.ic);a(G.cells[e.ic]).removeClass("edit-cell "+u);a(G).addClass(u).attr({"aria-selected":"true",tabindex:"0"})}g.enumEditableCells.call(b,r,a(r).hasClass("jqgrid-new-row")?"add":"edit",function(c){var k=c.cm,h=a(c.dataElement),e=c.dataWidth,w,m=k.name,n=k.edittype,q=c.iCol,r=k.editoptions||{};if("hidden"!==c.editable){try{w=a.unformat.call(this,c.td,{rowId:d,colModel:k},q)}catch(P){w=
"textarea"===n?h.text():h.html()}p[m]=w;h.html("");k=a.extend({},r,{id:d+"_"+m,name:m,rowId:d,mode:c.mode,cm:k,iCol:q});if("&nbsp;"===w||"&#160;"===w||1===w.length&&160===w.charCodeAt(0))w="";w=g.createEl.call(b,n,k,w,!0,a.extend({},g.ajaxOptions,l.ajaxSelectOptions||{}));a(w).addClass("editable");h.append(w);e&&a(w).width(c.dataWidth);g.bindEv.call(b,w,k);"select"===n&&!0===r.multiple&&void 0===r.dataUrl&&g.msie&&a(w).width(a(w).width());null===f&&(f=q);v++}});0<v&&(p.id=d,l.savedRow.push(p),a(r).attr("editable",
"1"),n&&("number"===typeof n&&parseInt(n,10)<=m.length?f=n:"string"===typeof n?f=l.iColByName[n]:null!=B&&(f=B.cellIndex),setTimeout(function(){var d=c.jqGrid("getNumberOfFrozenColumns"),k=function(a){return l.frozenColumns&&0<d&&f<d?b.grid.fbRows[r.rowIndex].cells[a]:r.cells[a]},g=function(b){return a(b).find("input,textarea,select,button,object,*[tabindex]").filter(":input:visible:not(:disabled)")},h=function(){return g(l.frozenColumns&&0<d?b.grid.fbRows[r.rowIndex]:r).first()},w=g(k(f));0<w.length?
w.first().focus():"number"===typeof x.defaultFocusField||"string"===typeof x.defaultFocusField?(w=g(k("number"===typeof x.defaultFocusField?x.defaultFocusField:l.iColByName[x.defaultFocusField])),0===w.length&&(w=h()),w.first().focus()):h().focus()},0)),!0===x.keys&&(m=a(r),l.frozenColumns&&(m=m.add(b.grid.fbRows[r.rowIndex])),m.on("keydown",function(a){if(27===a.keyCode)return c.jqGrid("restoreRow",d,x.afterrestorefunc),!1;if(13===a.keyCode){if("TEXTAREA"===a.target.tagName)return!0;c.jqGrid("saveRow",
d,x);return!1}})),t.call(b,x.oneditfunc,"jqGridInlineEditRow",d,x))}}})},saveRow:function(d,f,e,l,c,v,G,B){var m=a.makeArray(arguments).slice(1),b={},h=this[0],n=a(h),k=null!=h?h.p:null,p,u=g.info_dialog,z=a.isFunction,K=null!=g.defaults&&z(g.defaults.fatalError)?g.defaults.fatalError:alert;if(h.grid&&null!=k){"object"===a.type(m[0])?b=m[0]:(z(f)&&(b.successfunc=f),void 0!==e&&(b.url=e),void 0!==l&&(b.extraparam=l),z(c)&&(b.aftersavefunc=c),z(v)&&(b.errorfunc=v),z(G)&&(b.afterrestorefunc=G),z(B)&&
(b.beforeSaveRow=B));var m=function(a){return n.jqGrid("getGridRes",a)},b=a.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,beforeSaveRow:null,ajaxSaveOptions:{},serializeSaveData:null,mtype:"POST",saveui:"enable",savetext:m("defaults.savetext")||"Saving..."},g.inlineEdit,k.inlineEditing||{},b),q={},I={},A={},x,r,H,y=n.jqGrid("getInd",d,!0),C=a(y),E=k.prmNames,L=m("errors.errcap"),M=m("edit.bClose"),J,N;if(!1!==y&&(p=
b.extraparam[E.oper]===E.addoper?"add":"edit",F.call(h,b,"beforeSaveRow",b,d,p)&&(m=C.attr("editable"),b.url=b.url||k.editurl,J="clientArray"!==b.url,"1"===m&&(g.enumEditableCells.call(h,y,C.hasClass("jqgrid-new-row")?"add":"edit",function(b){var c=b.cm,k=c.formatter,l=c.editoptions||{},p=c.formatoptions||{},w={},e=(a.jgrid.detectRowEditing.call(h,d)||{}).savedRow,f=g.getEditedValue.call(h,a(b.dataElement),c,w,b.editable);"select"===c.edittype&&"select"!==c.formatter&&(I[c.name]=w.text);H=g.checkValues.call(h,
f,b.iCol,void 0,void 0,a.extend(b,{oldValue:null!=e?e[c.name]:null,newValue:f,oldRowData:e}));if(null!=H&&!1===H[0]){N=!0;try{var m=g.getRelativeRect.call(h,b.td);u.call(h,L,H[1],M,{top:m.top,left:m.left+a(h).closest(".ui-jqgrid").offset().left})}catch(Q){K(H[1])}return!1}"date"===k&&!0!==p.sendFormatted&&(f=a.unformat.date.call(h,f,c));J&&!0===l.NullIfEmpty&&""===f&&(f="null");q[c.name]=f}),!N&&(m=d,E=k.prmNames,r=!1===k.keyName?E.id:k.keyName,q&&(q[E.oper]=E.editoper,void 0===q[r]||""===q[r]?q[r]=
d:y.id!==k.idPrefix+q[r]&&(y=g.stripPref(k.idPrefix,d),void 0!==k._index[y]&&(k._index[q[r]]=k._index[y],delete k._index[y]),d=k.idPrefix+q[r],C.attr("id",d),k.selrow===m&&(k.selrow=d),a.isArray(k.selarrrow)&&(y=a.inArray(m,k.selarrrow),0<=y&&(k.selarrrow[y]=d)),k.multiselect&&(y="jqg_"+k.id+"_"+d,C.find("input.cbox").attr("id",y).attr("name",y))),q=a.extend({},q,k.inlineData||{},b.extraparam)),F.call(h,b,"saveRowValidation",b,d,q,p))))))if(J)n.jqGrid("progressBar",{method:"show",loadtype:b.saveui,
htmlcontent:b.savetext}),A=a.extend({},q,A),A[r]=g.stripPref(k.idPrefix,A[r]),k.autoEncodeOnEdit&&a.each(A,function(a,b){z(b)||(A[a]=g.oldEncodePostedData(b))}),a.ajax(a.extend({url:z(b.url)?b.url.call(h,A[r],p,A,b):b.url,data:g.serializeFeedback.call(h,z(b.serializeSaveData)?b.serializeSaveData:k.serializeRowData,"jqGridInlineSerializeSaveData",A),type:z(b.mtype)?b.mtype.call(h,p,b,A[r],A):b.mtype,complete:function(c,l){n.jqGrid("progressBar",{method:"hide",loadtype:b.saveui});if((300>c.status||
304===c.status)&&(0!==c.status||4!==c.readyState)){var f,e;e=n.triggerHandler("jqGridInlineSuccessSaveRow",[c,d,b]);if(null==e||!0===e)e=[!0,q];e[0]&&z(b.successfunc)&&(e=b.successfunc.call(h,c));a.isArray(e)?(f=e[0],q=e[1]||q):f=e;if(!0===f){k.autoEncodeOnEdit&&a.each(q,function(a,b){q[a]=g.oldDecodePostedData(b)});q=a.extend({},q,I);n.jqGrid("setRowData",d,q);C.attr("editable","0");for(f=0;f<k.savedRow.length;f++)if(String(k.savedRow[f].id)===String(d)){x=f;break}0<=x&&k.savedRow.splice(x,1);t.call(h,
b.aftersavefunc,"jqGridInlineAfterSaveRow",d,c,q,b);C.removeClass("jqgrid-new-row").off("keydown")}else t.call(h,b.errorfunc,"jqGridInlineErrorSaveRow",d,c,l,null,b),!0===b.restoreAfterError&&n.jqGrid("restoreRow",d,b.afterrestorefunc)}},error:function(a,c,k){n.triggerHandler("jqGridInlineErrorSaveRow",[d,a,c,k,b]);if(z(b.errorfunc))b.errorfunc.call(h,d,a,c,k);else{a=a.responseText||a.statusText;try{u.call(h,L,'<div class="'+D.call(h,"error")+'">'+a+"</div>",M,{buttonalign:"right"})}catch(O){K(a)}}!0===
b.restoreAfterError&&n.jqGrid("restoreRow",d,b.afterrestorefunc)}},g.ajaxOptions,k.ajaxRowOptions,b.ajaxSaveOptions||{}));else{q=a.extend({},q,I);r=n.jqGrid("setRowData",d,q);C.attr("editable","0");for(p=0;p<k.savedRow.length;p++)if(String(k.savedRow[p].id)===String(m)){x=p;break}0<=x&&k.savedRow.splice(x,1);t.call(h,b.aftersavefunc,"jqGridInlineAfterSaveRow",d,r,q,b);C.removeClass("jqgrid-new-row").off("keydown")}}},restoreRow:function(d,f){var e=a.makeArray(arguments).slice(1),l={};"object"===a.type(e[0])?
l=e[0]:a.isFunction(f)&&(l.afterrestorefunc=f);return this.each(function(){var c=this,e=a(c),f=c.p,p=-1,m={},b;if(c.grid){var h=a.extend(!0,{},g.inlineEdit,f.inlineEditing||{},l),n=e.jqGrid("getInd",d,!0);if(!1!==n&&F.call(c,h,"beforeCancelRow",h,d)){for(b=0;b<f.savedRow.length;b++)if(String(f.savedRow[b].id)===String(d)){p=b;break}if(0<=p){if(a.isFunction(a.fn.datepicker))try{a("input.hasDatepicker","#"+g.jqID(n.id)).datepicker("hide")}catch(k){}a.each(f.colModel,function(){var b=this.name;f.savedRow[p].hasOwnProperty(b)&&
(m[b]=f.savedRow[p][b],!this.formatter||"date"!==this.formatter||null!=this.formatoptions&&!0===this.formatoptions.sendFormatted||(m[b]=a.unformat.date.call(c,m[b],this)))});e.jqGrid("setRowData",d,m);a(n).attr("editable","0").off("keydown");f.savedRow.splice(p,1);a("#"+g.jqID(d),c).hasClass("jqgrid-new-row")&&setTimeout(function(){e.jqGrid("delRowData",d);e.jqGrid("showAddEditButtons",!1)},0)}t.call(c,h.afterrestorefunc,"jqGridInlineAfterRestoreRow",d)}}})},addRow:function(d){return this.each(function(){if(this.grid){var f=
this,e=a(f),l=f.p,c=a.extend(!0,{rowID:null,initdata:{},position:"first",useDefValues:!0,useFormatter:!1,beforeAddRow:null,addRowParams:{extraparam:{}}},g.inlineEdit,l.inlineEditing||{},d||{});F.call(f,c,"beforeAddRow",c.addRowParams)&&(c.rowID=a.isFunction(c.rowID)?c.rowID.call(f,c):null!=c.rowID?c.rowID:g.randId(),!0===c.useDefValues&&a(l.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var d=this.editoptions.defaultValue;c.initdata[this.name]=a.isFunction(d)?d.call(f):
d}}),c.rowID=l.idPrefix+c.rowID,e.jqGrid("addRowData",c.rowID,c.initdata,c.position),a("#"+g.jqID(c.rowID),f).addClass("jqgrid-new-row"),c.useFormatter?a("#"+g.jqID(c.rowID)+" .ui-inline-edit",f).click():(l=l.prmNames,c.addRowParams.extraparam[l.oper]=l.addoper,e.jqGrid("editRow",c.rowID,c.addRowParams),e.jqGrid("setSelection",c.rowID)))}})},inlineNav:function(d,f){"object"===typeof d&&(f=d,d=void 0);return this.each(function(){var p=this,l=a(p),c=p.p;if(this.grid&&null!=c){var v,t=d===c.toppager?
c.idSel+"_top":c.idSel,u=d===c.toppager?c.id+"_top":c.id,m=D.call(p,"disabled"),b=a.extend(!0,{edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",save:!0,saveicon:"ui-icon-disk",cancel:!0,cancelicon:"ui-icon-cancel",commonIconClass:"ui-icon",iconsOverText:!1,addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:!0},l.jqGrid("getGridRes","nav"),g.nav||{},c.navOptions||{},g.inlineNav||{},c.inlineNavOptions||{},f||{});if(void 0===d)if(c.pager)if(l.jqGrid("inlineNav",
c.pager,b),c.toppager)d=c.toppager,t=c.idSel+"_top",u=c.id+"_top";else return;else c.toppager&&(d=c.toppager,t=c.idSel+"_top",u=c.id+"_top");if(void 0!==d&&(v=a(d),!(0>=v.length))){0>=v.find(".navtable").length&&l.jqGrid("navGrid",d,{add:!1,edit:!1,del:!1,search:!1,refresh:!1,view:!1});c._inlinenav=!0;if(!0===b.addParams.useFormatter){v=c.colModel;var h,n;for(h=0;h<v.length;h++)if(v[h].formatter&&"actions"===v[h].formatter){v[h].formatoptions&&(n={keys:!1,onEdit:null,onSuccess:null,afterSave:null,
onError:null,afterRestore:null,extraparam:{},url:null},v=a.extend(n,v[h].formatoptions),b.addParams.addRowParams={keys:v.keys,oneditfunc:v.onEdit,successfunc:v.onSuccess,url:v.url,extraparam:v.extraparam,aftersavefunc:v.afterSave,errorfunc:v.onError,afterrestorefunc:v.afterRestore});break}}b.add&&l.jqGrid("navButtonAdd",d,{caption:b.addtext,title:b.addtitle,commonIconClass:b.commonIconClass,buttonicon:b.addicon,iconsOverText:b.iconsOverText,id:u+"_iladd",onClickButton:function(){e(this,m)||l.jqGrid("addRow",
b.addParams)}});b.edit&&l.jqGrid("navButtonAdd",d,{caption:b.edittext,title:b.edittitle,commonIconClass:b.commonIconClass,buttonicon:b.editicon,iconsOverText:b.iconsOverText,id:u+"_iledit",onClickButton:function(){if(!e(this,m)){var a=c.selrow;a?l.jqGrid("editRow",a,b.editParams):p.modalAlert()}}});b.save&&(l.jqGrid("navButtonAdd",d,{caption:b.savetext,title:b.savetitle,commonIconClass:b.commonIconClass,buttonicon:b.saveicon,iconsOverText:b.iconsOverText,id:u+"_ilsave",onClickButton:function(){if(!e(this,
m)){var d=c.savedRow[0].id;if(d){var f=c.prmNames,h=f.oper,n=b.editParams;a("#"+g.jqID(d),p).hasClass("jqgrid-new-row")?(b.addParams.addRowParams.extraparam[h]=f.addoper,n=b.addParams.addRowParams):(b.editParams.extraparam||(b.editParams.extraparam={}),b.editParams.extraparam[h]=f.editoper);l.jqGrid("saveRow",d,n)}else p.modalAlert()}}}),a(t+"_ilsave").addClass(m));b.cancel&&(l.jqGrid("navButtonAdd",d,{caption:b.canceltext,title:b.canceltitle,commonIconClass:b.commonIconClass,buttonicon:b.cancelicon,
iconsOverText:b.iconsOverText,id:u+"_ilcancel",onClickButton:function(){if(!e(this,m)){var d=c.savedRow[0].id,f=b.editParams;d?(a("#"+g.jqID(d),p).hasClass("jqgrid-new-row")&&(f=b.addParams.addRowParams),l.jqGrid("restoreRow",d,f)):p.modalAlert()}}}),a(t+"_ilcancel").addClass(m));if(!0===b.restoreAfterSelect)l.on("jqGridSelectRow",function(a,d){if(0<c.savedRow.length&&!0===c._inlinenav){var f=c.savedRow[0].id;d!==f&&"number"!==typeof f&&l.jqGrid("restoreRow",f,b.editParams)}});l.on("jqGridInlineAfterRestoreRow jqGridInlineAfterSaveRow",
function(){l.jqGrid("showAddEditButtons",!1)});l.on("jqGridInlineEditRow",function(a,b){l.jqGrid("showAddEditButtons",!0,b)})}}})},showAddEditButtons:function(d){return this.each(function(){if(this.grid){var f=this.p,e=f.idSel,g=D.call(this,"disabled"),c=e+"_ilsave,"+e+"_ilcancel"+(f.toppager?","+e+"_top_ilsave,"+e+"_top_ilcancel":""),f=e+"_iladd,"+e+"_iledit"+(f.toppager?","+e+"_top_iladd,"+e+"_top_iledit":"");a(d?f:c).addClass(g);a(d?c:f).removeClass(g)}})}})});
//# sourceMappingURL=grid.inlinedit.map
