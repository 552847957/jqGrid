(function(a){"function"===typeof define&&define.amd?define(["jquery","./grid.base","./jquery.fmatter","./grid.common","./jsonxml"],a):"object"===typeof exports?a(require("jquery")):a(jQuery)})(function(a){var u=a.jgrid,D=u.jqID,G=a.fn.jqGrid,S=u.mergeCssClasses,T=u.hasOneFromClasses,Y=function(a,O){return S(u.getRes(u.guiStyles[this.p.guiStyle],a),O||"")},P=function(a){return Y.call(this,"states."+a)},ma=u.feedback,oa=u.fullBoolFeedback,L=u.hideModal,fa=u.viewModal,ga=u.createModal,na=u.info_dialog,
Q=u.builderFmButon,U=function(a,u){var h=a[0].style[u];return 0<=h.indexOf("px")?parseFloat(h):h},pa=function(p,u,h){var m=h.w;u=a(u);var k=this.closest(".ui-jqgrid"),c;a.contains(k[0],m[0])?(c=U(m,"top"),k=U(m,"left")):(c=m.offset().top-(k.offsetParent().offset().top+k.offset().top+k.position().top+parseFloat(k.css("border-top-width")||0)),k=m.offset().left-(k.offsetParent().offset().left+k.offset().left+k.position().left+parseFloat(k.css("border-left-width")||0)));this.data(p,{top:c,left:k,width:U(m,
"width"),height:U(m,"height"),dataheight:U(u,"height")||"auto",datawidth:U(u,"width")||"auto"});m.remove();h.o&&h.o.remove()},ca=function(a,u,h){!0===u[0]&&(h="<span class='"+S("fm-button-icon",h,u[2])+"'></span>","right"===u[1]?a.addClass("fm-button-icon-right").append(h):a.addClass("fm-button-icon-left").prepend(h))},la=function(a){return"&nbsp;"===a||"&#160;"===a||1===a.length&&160===a.charCodeAt(0)};u.extend({searchGrid:function(p){return this.each(function(){function O(b){v("beforeShow",b)&&
(a(z).data("onClose",c.onClose),fa(z,{gbox:C,jqm:c.jqModal,overlay:c.overlay,modal:c.modal,overlayClass:c.overlayClass,toTop:c.toTop,onHide:function(a){pa.call(m,"searchProp",e,a)}}),v("afterShow",b))}var h=this,m=a(h),k=h.p;if(h.grid&&null!=k){var c=a.extend(!0,{recreateFilter:!1,drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,closeAfterSearch:!1,
closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,removemodal:!0,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:void 0,onClose:null,onSearch:null,onReset:null,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE","in":"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",
nu:"IS NULL",nn:"IS NOT NULL"}},G.getGridRes.call(m,"search"),u.search||{},k.searching||{},p||{}),e="fbox_"+k.id,l=c.commonIconClass,f={themodal:"searchmod"+e,modalhead:"searchhd"+e,modalcontent:"searchcnt"+e,resizeAlso:e},z="#"+D(f.themodal),C=k.gBox,d=k.gView,n=k.postData[c.sFilter],v=function(){var b=a.makeArray(arguments);b.unshift("Search");b.unshift("Filter");b.unshift(c);return ma.apply(h,b)};"string"===typeof n&&(n=""!==a.trim(n)?u.parse(n):void 0);!0===c.recreateFilter?a(z).remove():m.data("searchProp")&&
a.extend(c,m.data("searchProp"));if(void 0!==a(z)[0])O(a("#fbox_"+k.idSel));else{var t=a("<div><div id='"+e+"' class='searchFilter' style='overflow:auto'></div></div>").insertBefore(d);"rtl"===k.direction&&t.attr("dir","rtl");var A="",H="",I,b=!1,y,K=-1,q=a.extend([],k.colModel);y=Q.call(h,e+"_search",c.Find,S(l,c.findDialogIcon),"right");var F=Q.call(h,e+"_reset",c.Reset,S(l,c.resetDialogIcon),"left");c.showQuery&&(A=Q.call(h,e+"_query","Query",S(l,c.queryDialogIcon),"left")+"&#160;");c.columns.length?
(q=c.columns,K=0,I=q[0].index||q[0].name):a.each(q,function(a,c){c.label||(c.label=k.colNames[a]);if(!b){var e=void 0===c.search?!0:c.search,d=!0===c.hidden;if(c.searchoptions&&!0===c.searchoptions.searchhidden&&e||e&&!d)b=!0,I=c.index||c.name,K=a}});if(!n&&I||!1===c.multipleSearch)l="eq",0<=K&&q[K].searchoptions&&q[K].searchoptions.sopt?l=q[K].searchoptions.sopt[0]:c.sopt&&c.sopt.length&&(l=c.sopt[0]),n={groupOp:"AND",rules:[{field:I,op:l,data:""}]};b=!1;c.tmplNames&&c.tmplNames.length&&(b=!0,H=
c.tmplLabel,H+="<select class='ui-template'>",H+="<option value='default'>Default</option>",a.each(c.tmplNames,function(a,b){H+="<option value='"+a+"'>"+b+"</option>"}),H+="</select>");y="<table class='EditTable' style='border:0px none;margin-top:5px' id='"+e+"_2'><tbody><tr><td colspan='2'><hr class='"+Y.call(h,"dialog.hr")+"' style='margin:1px'/></td></tr><tr><td class='EditButton EditButton-"+k.direction+"'  style='float:"+("rtl"===k.direction?"right":"left")+";'>"+F+H+"</td><td class='EditButton EditButton-"+
k.direction+"'>"+A+y+"</td></tr></tbody></table>";e=D(e);c.gbox="#gbox_"+e;c.height="auto";e="#"+e;a(e).jqFilter({columns:q,filter:c.loadDefaults?n:null,showQuery:c.showQuery,errorcheck:c.errorcheck,sopt:c.sopt,groupButton:c.multipleGroup,ruleButtons:c.multipleSearch,afterRedraw:c.afterRedraw,ops:c.odata,cops:k.customSortOperations,operands:c.operands,ajaxSelectOptions:k.ajaxSelectOptions,groupOps:c.groupOps,onChange:function(){this.p.showQuery&&a(".query",this).html(this.toUserFriendlyString());
oa.call(h,c.afterChange,"jqGridFilterAfterChange",a(e),c)},direction:k.direction,id:k.id});t.append(y);b&&c.tmplFilters&&c.tmplFilters.length&&a(".ui-template",t).bind("change",function(){var b=a(this).val();"default"===b?a(e).jqFilter("addFilter",n):a(e).jqFilter("addFilter",c.tmplFilters[parseInt(b,10)]);return!1});!0===c.multipleGroup&&(c.multipleSearch=!0);v("onInitialize",a(e));c.layer?ga.call(h,f,t,c,d,a(C)[0],"#"+D(c.layer),{position:"relative"}):ga.call(h,f,t,c,d,a(C)[0]);(c.searchOnEnter||
c.closeOnEscape)&&a(z).keydown(function(b){var d=a(b.target);if(!(!c.searchOnEnter||13!==b.which||d.hasClass("add-group")||d.hasClass("add-rule")||d.hasClass("delete-group")||d.hasClass("delete-rule")||d.hasClass("fm-button")&&d.is("[id$=_query]")))return a(e+"_search").click(),!1;if(c.closeOnEscape&&27===b.which)return a("#"+D(f.modalhead)).find(".ui-jqdialog-titlebar-close").click(),!1});A&&a(e+"_query").bind("click",function(){a(".queryresult",t).toggle();return!1});void 0===c.stringResult&&(c.stringResult=
c.multipleSearch);a(e+"_search").bind("click",function(){var b={},d,n,f=a(e);n=f.find(".input-elm");n.filter(":focus")&&(n=n.filter(":focus"));n.change();n=f.jqFilter("filterData");if(c.errorcheck&&(f[0].hideError(),c.showQuery||f.jqFilter("toSQLString"),f[0].p.error))return f[0].showError(),!1;if(c.stringResult||"local"===k.datatype){try{d=xmlJsonClass.toJson(n,"","",!1)}catch(t){try{d=JSON.stringify(n)}catch(l){}}"string"===typeof d&&(b[c.sFilter]=d,a.each([c.sField,c.sValue,c.sOper],function(){b[this]=
""}))}else c.multipleSearch?(b[c.sFilter]=n,a.each([c.sField,c.sValue,c.sOper],function(){b[this]=""})):(b[c.sField]=n.rules[0].field,b[c.sValue]=n.rules[0].data,b[c.sOper]=n.rules[0].op,b[c.sFilter]="");k.search=!0;a.extend(k.postData,b);oa.call(h,c.onSearch,"jqGridFilterSearch",k.filters)&&m.trigger("reloadGrid",[a.extend({page:1},c.reloadGridSearchOptions||{})]);c.closeAfterSearch&&L(z,{gb:C,jqm:c.jqModal,onClose:c.onClose,removemodal:c.removemodal});return!1});a(e+"_reset").bind("click",function(){var d=
{},n=a(e);k.search=!1;k.resetsearch=!0;!1===c.multipleSearch?d[c.sField]=d[c.sValue]=d[c.sOper]="":d[c.sFilter]="";n[0].resetFilter();b&&a(".ui-template",t).val("default");a.extend(k.postData,d);oa.call(h,c.onReset,"jqGridFilterReset")&&m.trigger("reloadGrid",[a.extend({page:1},c.reloadGridResetOptions||{})]);c.closeAfterReset&&L(z,{gb:C,jqm:c.jqModal,onClose:c.onClose,removemodal:c.removemodal});return!1});O(a(e));var x=P.call(h,"hover");a(".fm-button:not(."+P.call(h,"disabled").split(" ").join(".")+
")",t).hover(function(){a(this).addClass(x)},function(){a(this).removeClass(x)})}}})},editGridRow:function(p,O){return this.each(function(){function h(){a(F+" > tbody > tr > td .FormElement").each(function(){var r=a(".customelement",this),c=this.name;if(r.length){if(c=r.attr("name"),r=da[c],void 0!==r&&(r=V[r],r=r.editoptions||{},a.isFunction(r.custom_value))){try{if(g[c]=r.custom_value.call(n,a("#"+D(c),F),"get"),void 0===g[c])throw"e1";}catch(d){"e1"===d?na.call(n,ha,"function 'custom_value' "+
b.msg.novalue,b.bClose):na.call(n,ha,d.message,b.bClose)}return!0}}else switch(r=a(this)[0].type,r){case "checkbox":g[c]=a(this).is(":checked")?a(this).val():a(this).data("offval");break;case "select-one":g[c]=a("option:selected",this).val();break;case "select-multiple":g[c]=a(this).val();g[c]=g[c]?g[c].join(","):"";a("option:selected",this).each(function(b,r){a(r).text()});break;case "date":g[c]=a(this).val();3===String(g[c]).split("-").length&&(r=da[c],void 0!==r&&(r=V[r],r=r.formatoptions||{},
r=r.newformat||H.call(v,"formatter.date.newformat"),g[c]=u.parseDate.call(v[0],"Y-m-d",g[c],r)));break;default:void 0!==r&&0>a.inArray(r,b.skipPostTypes)&&(g[c]=a(this).val())}});return!0}function m(r,c,g){var d=0,e=[],h=!1,k="",f;for(f=1;f<=g;f++)k+="<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>";"_empty"!==r&&(h=G.getInd.call(v,r));a(V).each(function(f){var m=this.name,l,x,p,q,w;l=this.editable;var B=!1,v=!1;w="_empty"===r?"addForm":"editForm";a.isFunction(l)&&(l=l.call(n,{rowid:r,
iCol:f,iRow:h,cmName:m,cm:this,mode:w}));q=(this.editrules&&!0===this.editrules.edithidden?0:!0===this.hidden||"hidden"===l)?"style='display:none'":"";switch(String(l).toLowerCase()){case "hidden":l=!0;break;case "disabled":B=l=!0;break;case "readonly":v=l=!0}if("cb"!==m&&"subgrid"!==m&&!0===l&&"rn"!==m){if(!1===h)p="";else{l=a(n.rows[h].cells[f]);try{p=a.unformat.call(n,l,{rowId:r,colModel:this},f)}catch(z){p=this.edittype&&"textarea"===this.edittype?l.text():l.html()}la(p)&&(p="")}l=a.extend({},
this.editoptions||{},{id:m,name:m,rowId:r,mode:w});var R=a.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),E=parseInt(R.rowpos,10)||d+1,A=parseInt(2*(parseInt(R.colpos,10)||1),10);"_empty"===r&&l.defaultValue&&(p=a.isFunction(l.defaultValue)?l.defaultValue.call(n):l.defaultValue);this.edittype||(this.edittype="text");t.autoEncodeOnEdit&&(p=u.oldDecodePostedData(p));w=u.createEl.call(n,this.edittype,l,p,!1,a.extend({},u.ajaxOptions,t.ajaxSelectOptions||{}));if(b.checkOnSubmit||
b.checkOnUpdate)b._savedData[m]=p;a(w).addClass("FormElement");-1<a.inArray(this.edittype,["text","textarea","password","select"])&&a(w).addClass(Y.call(n,"dialog.dataField"));x=a(c).find("tr[data-rowpos="+E+"]");if(R.rowabove){var J=a("<tr><td class='contentinfo' colspan='"+2*g+"'>"+R.rowcontent+"</td></tr>");a(c).append(J);J[0].rp=E}0===x.length&&(x=a("<tr "+q+" data-rowpos='"+E+"'></tr>").addClass("FormData").attr("id","tr_"+m),a(x).append(k),a(c).append(x),x[0].rp=E);q=a("td:eq("+(A-2)+")",x[0]);
x=a("td:eq("+(A-1)+")",x[0]);q.html(void 0===R.label?t.colNames[f]:R.label||"&#160;");x[la(x.html())?"html":"append"](R.elmprefix).append(w).append(R.elmsuffix);B?(q.addClass(N),x.addClass(N),a(w).prop("readonly",!0),a(w).prop("disabled",!0)):v&&a(w).prop("readonly",!0);"custom"===this.edittype&&a.isFunction(l.custom_value)&&l.custom_value.call(n,a("#"+D(m),y),"set",p);u.bindEv.call(n,w,l);e[d]=f;d++}});0<d&&(f=a("<tr class='FormData' style='display:none'><td class='CaptionTD'>&#160;</td><td colspan='"+
(2*g-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+A+"_id' value='"+r+"'/></td></tr>"),f[0].rp=d+999,a(c).append(f),b.checkOnSubmit||b.checkOnUpdate)&&(b._savedData[A+"_id"]=r);return e}function k(r,c){var g,d=0,e,f,h,k,l;if(b.checkOnSubmit||b.checkOnUpdate)b._savedData={},b._savedData[A+"_id"]=r;var m=t.colModel;if("_empty"===r)a(m).each(function(){g=this.name;h=a.extend({},this.editoptions||{});(f=a("#"+D(g),c))&&f.length&&null!==f[0]&&(k="","custom"===this.edittype&&
a.isFunction(h.custom_value)?h.custom_value.call(n,f,"set",k):h.defaultValue?(k=a.isFunction(h.defaultValue)?h.defaultValue.call(n):h.defaultValue,"checkbox"===f[0].type?(l=k.toLowerCase(),0>l.search(/(false|f|0|no|n|off|undefined)/i)&&""!==l?(f[0].checked=!0,f[0].defaultChecked=!0,f[0].value=k):(f[0].checked=!1,f[0].defaultChecked=!1)):f.val(k)):"checkbox"===f[0].type?(f[0].checked=!1,f[0].defaultChecked=!1,k=a(f).data("offval")):f[0].type&&"select"===f[0].type.substr(0,6)?f[0].selectedIndex=0:f.val(k),
!0===b.checkOnSubmit||b.checkOnUpdate)&&(b._savedData[g]=k)}),a("#id_g",c).val(r);else{var x=G.getInd.call(v,r,!0);x&&(a(x.cells).filter("td[role=gridcell]").each(function(f){g=m[f].name;if("cb"!==g&&"subgrid"!==g&&"rn"!==g&&!0===m[f].editable){try{e=a.unformat.call(n,a(this),{rowId:r,colModel:m[f]},f)}catch(h){e="textarea"===m[f].edittype?a(this).text():a(this).html()}t.autoEncodeOnEdit&&(e=u.oldDecodePostedData(e));if(!0===b.checkOnSubmit||b.checkOnUpdate)b._savedData[g]=e;g="#"+D(g);switch(m[f].edittype){case "password":case "text":case "button":case "image":case "textarea":la(e)&&
(e="");a(g,c).val(e);break;case "select":var k=e.split(","),k=a.map(k,function(b){return a.trim(b)});a(g+" option",c).each(function(){var b=a(this),g=a.trim(b.val()),b=a.trim(b.text());m[f].editoptions.multiple||a.trim(e)!==b&&k[0]!==b&&k[0]!==g?m[f].editoptions.multiple?-1<a.inArray(b,k)||-1<a.inArray(g,k)?this.selected=!0:this.selected=!1:this.selected=!1:this.selected=!0});break;case "checkbox":e=String(e);if(m[f].editoptions&&m[f].editoptions.value)if(m[f].editoptions.value.split(":")[0]===e)a(g,
c)[M]({checked:!0,defaultChecked:!0});else a(g,c)[M]({checked:!1,defaultChecked:!1});else e=e.toLowerCase(),0>e.search(/(false|f|0|no|n|off|undefined)/i)&&""!==e?(a(g,c)[M]("checked",!0),a(g,c)[M]("defaultChecked",!0)):(a(g,c)[M]("checked",!1),a(g,c)[M]("defaultChecked",!1));break;case "custom":try{if(m[f].editoptions&&a.isFunction(m[f].editoptions.custom_value))m[f].editoptions.custom_value.call(n,a(g,c),"set",e);else throw"e1";}catch(h){"e1"===h?na.call(n,ha,"function 'custom_value' "+b.msg.nodefined,
b.bClose):na.call(n,ha,h.message,b.bClose)}}d++}}),0<d&&a("#id_g",F).val(r))}}function c(){var c=b.url||t.editurl;a.each(V,function(b,d){var e=d.name,f=g[e];"date"!==d.formatter||null!=d.formatoptions&&!0===d.formatoptions.sendFormatted||(g[e]=a.unformat.date.call(n,f,d));"clientArray"!==c&&d.editoptions&&!0===d.editoptions.NullIfEmpty&&g.hasOwnProperty(e)&&""===f&&(g[e]="null")})}function e(){var r=[!0,"",""],d={},e=t.prmNames,f,h,m,l,p,q=v.triggerHandler("jqGridAddEditBeforeCheckValues",[a(y),J]);
q&&"object"===typeof q&&(g=q);a.isFunction(b.beforeCheckValues)&&(q=b.beforeCheckValues.call(n,g,a(y),J))&&"object"===typeof q&&(g=q);for(m in g)if(g.hasOwnProperty(m)&&(r=u.checkValues.call(n,g[m],m),!1===r[0]))break;c();r[0]&&(d=v.triggerHandler("jqGridAddEditClickSubmit",[b,g,J]),void 0===d&&a.isFunction(b.onclickSubmit)&&(d=b.onclickSubmit.call(n,b,g,J)||{}),r=v.triggerHandler("jqGridAddEditBeforeSubmit",[g,a(y),J]),void 0===r&&(r=[!0,"",""]),r[0]&&a.isFunction(b.beforeSubmit)&&(r=b.beforeSubmit.call(n,
g,a(y),J)));if(r[0]&&!b.processing){b.processing=!0;a("#sData",x).addClass(ta);m=b.url||t.editurl;h=e.oper;f="clientArray"===m&&!1!==t.keyName?t.keyName:e.id;g[h]="_empty"===a.trim(g[A+"_id"])?e.addoper:e.editoper;g[h]!==e.addoper?g[f]=g[A+"_id"]:void 0===g[f]&&(g[f]=g[A+"_id"]);delete g[A+"_id"];g=a.extend(g,b.editData,d);if(!0===t.treeGrid)for(p in g[h]===e.addoper&&(l=t.selrow,g["adjacency"===t.treeGridModel?t.treeReader.parent_id_field:"parent_id"]=l),t.treeReader)t.treeReader.hasOwnProperty(p)&&
(d=t.treeReader[p],!g.hasOwnProperty(d)||g[h]===e.addoper&&"parent_id_field"===p||delete g[d]);g[f]=u.stripPref(t.idPrefix,g[f]);t.autoEncodeOnEdit&&a.each(g,function(b,c){a.isFunction(c)||(g[b]=u.oldEncodePostedData(c))});p=a.extend({url:a.isFunction(m)?m.call(n,g[f],J,g,b):m,type:a.isFunction(b.mtype)?b.mtype.call(n,J,b,g[f],g):b.mtype,data:u.serializeFeedback.call(n,a.isFunction(b.serializeEditData)?b.serializeEditData:t.serializeEditData,"jqGridAddEditSerializeEditData",g),complete:function(c,
d){a("#sData",x).removeClass(ta);g[f]=t.idPrefix+a("#id_g",F).val();300<=c.status&&304!==c.status||0===c.status&&4===c.readyState?(r[0]=!1,r[1]=v.triggerHandler("jqGridAddEditErrorTextFormat",[c,J]),a.isFunction(b.errorTextFormat)?r[1]=b.errorTextFormat.call(n,c,J):r[1]=d+" Status: '"+c.statusText+"'. Error code: "+c.status):(r=v.triggerHandler("jqGridAddEditAfterSubmit",[c,g,J]),void 0===r&&(r=[!0,"",""]),r[0]&&a.isFunction(b.afterSubmit)&&(r=b.afterSubmit.call(n,c,g,J)));if(!1===r[0])a("#FormError>td",
F).html(r[1]),a("#FormError",F).show();else{t.autoEncodeOnEdit&&a.each(g,function(a,b){g[a]=u.oldDecodePostedData(b)});var m=[a.extend({},b.reloadGridOptions||{})];g[h]===e.addoper?(r[2]||(r[2]=u.randId()),null==g[f]||"_empty"===g[f]||g[h]===e.addoper?g[f]=r[2]:r[2]=g[f],b.reloadAfterSubmit?v.trigger("reloadGrid",m):!0===t.treeGrid?G.addChildNode.call(v,r[2],l,g):G.addRowData.call(v,r[2],g,b.addedrow),b.closeAfterAdd?(!0!==t.treeGrid&&I.call(v,r[2]),L(w,{gb:E,jqm:b.jqModal,onClose:b.onClose,removemodal:b.removemodal,
formprop:!b.recreateForm,form:b.form})):b.clearAfterAdd&&k("_empty",y)):(b.reloadAfterSubmit?(v.trigger("reloadGrid",m),b.closeAfterEdit||setTimeout(function(){I.call(v,g[f])},1E3)):!0===t.treeGrid?G.setTreeRow.call(v,g[f],g):G.setRowData.call(v,g[f],g),b.closeAfterEdit&&L(w,{gb:E,jqm:b.jqModal,onClose:b.onClose,removemodal:b.removemodal,formprop:!b.recreateForm,form:b.form}));if(a.isFunction(b.afterComplete)){var p=c;setTimeout(function(){v.triggerHandler("jqGridAddEditAfterComplete",[p,g,a(y),J]);
b.afterComplete.call(n,p,g,a(y),J);p=null},50)}if(b.checkOnSubmit||b.checkOnUpdate)if(a(y).data("disabled",!1),"_empty"!==b._savedData[A+"_id"])for(var q in b._savedData)b._savedData.hasOwnProperty(q)&&g[q]&&(b._savedData[q]=g[q])}b.processing=!1;try{a(":input:visible",y)[0].focus()}catch(B){}}},u.ajaxOptions,b.ajaxEditOptions);p.url||b.useDataProxy||(a.isFunction(t.dataProxy)?b.useDataProxy=!0:(r[0]=!1,r[1]+=" "+u.errors.nourl));r[0]&&(b.useDataProxy?(d=t.dataProxy.call(n,p,"set_"+A),void 0===d&&
(d=[!0,""]),!1===d[0]?(r[0]=!1,r[1]=d[1]||"Error deleting the selected row!"):(p.data.oper===e.addoper&&b.closeAfterAdd&&L(w,{gb:E,jqm:b.jqModal,onClose:b.onClose,removemodal:b.removemodal,formprop:!b.recreateForm,form:b.form}),p.data.oper===e.editoper&&b.closeAfterEdit&&L(w,{gb:E,jqm:b.jqModal,onClose:b.onClose,removemodal:b.removemodal,formprop:!b.recreateForm,form:b.form}))):"clientArray"===p.url?(b.reloadAfterSubmit=!1,g=p.data,p.complete({status:200,statusText:""},"")):a.ajax(p))}!1===r[0]&&
(a("#FormError>td",F).html(r[1]),a("#FormError",F).show())}function l(a,b){var c=!1,g;for(g in a)if(a.hasOwnProperty(g)&&String(a[g])!==String(b[g])){c=!0;break}return c}function f(){var c=!0;a("#FormError",F).hide();b.checkOnUpdate&&(g={},h(),R=l(g,b._savedData))&&(a(y).data("disabled",!0),a(".confirm",w).show(),c=!1);return c}function z(){var b=u.detectRowEditing.call(n,p);if(null!=b)if("inlineEditing"===b.mode)G.restoreRow.call(v,p);else{var b=b.savedRow,c=n.rows[b.id];G.restoreCell.call(v,b.id,
b.ic);a(c.cells[b.ic]).removeClass("edit-cell "+ua);a(c).addClass(ua).attr({"aria-selected":"true",tabindex:"0"})}}function C(b,c){var g=c[1].length-1;0===b?a("#pData",x).addClass(N):void 0!==c[1][b-1]&&T(a("#"+D(c[1][b-1])),N)?a("#pData",x).addClass(N):a("#pData",x).removeClass(N);b===g?a("#nData",x).addClass(N):void 0!==c[1][b+1]&&T(a("#"+D(c[1][b+1])),N)?a("#nData",x).addClass(N):a("#nData",x).removeClass(N)}function d(){var b=G.getDataIDs.call(v),c=a("#id_g",F).val();return[a.inArray(c,b),b]}
var n=this,v=a(n),t=n.p;if(n.grid&&null!=t&&p){var A=t.id,H=G.getGridRes,I=G.setSelection,b=a.extend(!0,{top:0,left:0,width:300,datawidth:"auto",height:"auto",dataheight:"auto",drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,
closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:"ui-widget-overlay",removemodal:!0,skipPostTypes:["image","file"],form:"edit"},H.call(v,"edit"),u.edit,t.formEditing||{},O||{}),y="FrmGrid_"+A,K=y,q="TblGrid_"+A,F="#"+D(q),x=F+"_2",B={themodal:"editmod"+A,modalhead:"edithd"+A,modalcontent:"editcnt"+A,resizeAlso:y},
w="#"+D(B.themodal),E=t.gBox,M=t.propOrAttr,V=t.colModel,da=t.iColByName,ea=1,Z=0,g,R,J,ia=b.commonIconClass,ha=H.call(v,"errors.errcap"),W=function(){var c=a.makeArray(arguments);c.unshift("");c.unshift("AddEdit");c.unshift(b);return ma.apply(n,c)},va=P.call(n,"hover"),N=P.call(n,"disabled"),ua=P.call(n,"select"),ta=P.call(n,"active"),X=P.call(n,"error"),y="#"+D(y);"new"===p?(p="_empty",J="add",b.caption=b.addCaption):(b.caption=b.editCaption,J="edit");if(!b.recreateForm){var aa=v.data("formProp");
aa&&(aa.top=Math.max(aa.top,0),aa.left=Math.max(aa.left,0),a.extend(b,aa))}aa=!0;!b.checkOnUpdate||!0!==b.jqModal&&void 0!==b.jqModal||b.modal||(aa=!1);var ja=isNaN(b.dataheight)?b.dataheight:b.dataheight+"px",ba=isNaN(b.datawidth)?b.datawidth:b.datawidth+"px",K=a("<form name='FormPost' id='"+K+"' class='FormGrid' onSubmit='return false;' style='width:"+ba+";overflow:auto;position:relative;height:"+ja+";'></form>").data("disabled",!1),ka=a("<table id='"+q+"' class='EditTable'"+(u.msie&&8>u.msiever()?
" cellspacing='0'":"")+"><tbody></tbody></table>");a(V).each(function(){var a=this.formoptions;ea=Math.max(ea,a?a.colpos||0:0);Z=Math.max(Z,a?a.rowpos||0:0)});a(K).append(ka);X=a("<tr id='FormError' style='display:none'><td class='"+X+"' colspan='"+2*ea+"'>&#160;</td></tr>");X[0].rp=0;a(ka).append(X);X=a("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+2*ea+"'>"+(b.topinfo||"&#160;")+"</td></tr>");X[0].rp=0;a(ka).append(X);if(W("beforeInitData",K,J)){z();ja=(X="rtl"===t.direction?
!0:!1)?"nData":"pData";ba=X?"pData":"nData";m(p,ka,ea);var ja=Q.call(n,ja,"",S(ia,b.prevIcon),"","left"),ba=Q.call(n,ba,"",S(ia,b.nextIcon),"","right"),qa=Q.call(n,"sData",b.bSubmit),ra=Q.call(n,"cData",b.bCancel),q="<table"+(u.msie&&8>u.msiever()?" cellspacing='0'":"")+" class='EditTable' id='"+q+"_2'><tbody><tr><td colspan='2'><hr class='"+Y.call(n,"dialog.hr")+"' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton navButton-"+t.direction+"'>"+(X?ba+ja:ja+ba)+"</td><td class='EditButton EditButton-"+
t.direction+"'>"+qa+"&#160;"+ra+"</td></tr>",q=q+("<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+(b.bottominfo||"&#160;")+"</td></tr>"),q=q+"</tbody></table>";if(0<Z){var sa=[];a.each(a(ka)[0].rows,function(a,b){sa[a]=b});sa.sort(function(a,b){return a.rp>b.rp?1:a.rp<b.rp?-1:0});a.each(sa,function(b,c){a("tbody",ka).append(c)})}b.gbox=E;var U=!1;!0===b.closeOnEscape&&(b.closeOnEscape=!1,U=!0);q=a("<div></div>").append(K).append(q);ga.call(n,B,q,b,t.gView,a(E)[0]);b.topinfo&&
a(".tinfo",F).show();b.bottominfo&&a(".binfo",x).show();q=q=null;a(w).keydown(function(c){var g=(c.target.tagName||"").toUpperCase(),d,e;if(!0===a(y).data("disabled"))return!1;if(13===c.which&&"TEXTAREA"!==g){d=a(x).find(":focus");e=d.attr("id");if(0<d.length&&0<=a.inArray(e,["pData","nData","cData"]))return d.trigger("click"),!1;if(!0===b.savekey[0]&&13===b.savekey[1])return a("#sData",x).trigger("click"),!1}if(!0===b.savekey[0]&&c.which===b.savekey[1]&&"TEXTAREA"!==g)return a("#sData",x).trigger("click"),
!1;if(27===c.which){if(!f())return!1;U&&L(w,{gb:b.gbox,jqm:b.jqModal,onClose:b.onClose,removemodal:b.removemodal,formprop:!b.recreateForm,form:b.form});return!1}if(!0===b.navkeys[0]){if("_empty"===a("#id_g",F).val())return!0;if(c.which===b.navkeys[1])return a("#pData",x).trigger("click"),!1;if(c.which===b.navkeys[2])return a("#nData",x).trigger("click"),!1}});b.checkOnUpdate&&(a("a.ui-jqdialog-titlebar-close span",w).removeClass("jqmClose"),a("a.ui-jqdialog-titlebar-close",w).unbind("click").click(function(){if(!f())return!1;
L(w,{gb:E,jqm:b.jqModal,onClose:b.onClose,removemodal:b.removemodal,formprop:!b.recreateForm,form:b.form});return!1}));ca(a("#sData",x),b.saveicon,ia);ca(a("#cData",x),b.closeicon,ia);if(b.checkOnSubmit||b.checkOnUpdate)qa=Q.call(n,"sNew",b.bYes),ba=Q.call(n,"nNew",b.bNo),ra=Q.call(n,"cNew",b.bExit),B=b.zIndex||999,B++,a("<div class='"+b.overlayClass+" jqgrid-overlay confirm' style='z-index:"+B+";display:none;'>&#160;</div><div class='"+Y.call(n,"dialog.content","confirm ui-jqconfirm")+"' style='z-index:"+
(B+1)+"'>"+b.saveData+"<br/><br/>"+qa+ba+ra+"</div>").insertAfter(y),a("#sNew",w).click(function(){e();a(y).data("disabled",!1);a(".confirm",w).hide();return!1}),a("#nNew",w).click(function(){a(".confirm",w).hide();a(y).data("disabled",!1);setTimeout(function(){a(":input:visible",y)[0].focus()},0);return!1}),a("#cNew",w).click(function(){a(".confirm",w).hide();a(y).data("disabled",!1);L(w,{gb:E,jqm:b.jqModal,onClose:b.onClose,removemodal:b.removemodal,formprop:!b.recreateForm,form:b.form});return!1});
W("onInitializeForm",a(y),J);"_empty"!==p&&b.viewPagerButtons?a("#pData,#nData",x).show():a("#pData,#nData",x).hide();W("beforeShowForm",a(y),J);a(w).data("onClose",b.onClose);fa(w,{gbox:E,jqm:b.jqModal,overlay:b.overlay,modal:b.modal,overlayClass:b.overlayClass,toTop:b.toTop,onHide:function(a){pa.call(v,"formProp",y,a)}});aa||a("."+D(b.overlayClass)).click(function(){if(!f())return!1;L(w,{gb:E,jqm:b.jqModal,onClose:b.onClose,removemodal:b.removemodal,formprop:!b.recreateForm,form:b.form});return!1});
a(".fm-button",w).hover(function(){a(this).addClass(va)},function(){a(this).removeClass(va)});a("#sData",x).click(function(){g={};a("#FormError",F).hide();h();"_empty"===g[A+"_id"]?e():!0===b.checkOnSubmit?(R=l(g,b._savedData))?(a(y).data("disabled",!0),a(".confirm",w).show()):e():e();return!1});a("#cData",x).click(function(){if(!f())return!1;L(w,{gb:E,jqm:b.jqModal,onClose:b.onClose,removemodal:b.removemodal,formprop:!b.recreateForm,form:b.form});return!1});a("#nData",x).click(function(){if(!f())return!1;
a("#FormError",F).hide();var b=d();b[0]=parseInt(b[0],10);if(-1!==b[0]&&b[1][b[0]+1]){if(!W("onclickPgButtons","next",a(y),b[1][b[0]]))return!1;k(b[1][b[0]+1],y);I.call(v,b[1][b[0]+1]);W("afterclickPgButtons","next",a(y),b[1][b[0]+1]);C(b[0]+1,b)}return!1});a("#pData",x).click(function(){if(!f())return!1;a("#FormError",F).hide();var b=d();if(-1!==b[0]&&b[1][b[0]-1]){if(!W("onclickPgButtons","prev",a(y),b[1][b[0]])||T(a("#"+D(b[1][b[0]-1])),N))return!1;k(b[1][b[0]-1],y);I.call(v,b[1][b[0]-1]);W("afterclickPgButtons",
"prev",a(y),b[1][b[0]-1]);C(b[0]-1,b)}return!1});W("afterShowForm",a(y),J);B=d();C(B[0],B)}}})},viewGridRow:function(p,O){return this.each(function(){function h(){!0!==d.closeOnEscape&&!0!==d.navkeys[0]||setTimeout(function(){a(".ui-jqdialog-titlebar-close","#"+D(b.modalhead)).attr("tabindex","-1").focus()},0)}function m(b,c,e){var h,m,k,n=0,p,t,x=[],w=G.getInd.call(f,b),B;B=Y.call(l,"dialog.viewData","DataTD form-view-data");var v=Y.call(l,"dialog.viewLabel","CaptionTD form-view-label"),y="<td class='"+
v+"' width='"+d.labelswidth+"'>&#160;</td><td class='"+B+" ui-helper-reset'>&#160;</td>",E="",v="<td class='"+v+"'></td><td class='"+B+"'></td>",A=["integer","number","currency"],C=0,D=0,F,r,H;for(B=1;B<=e;B++)E+=1===B?y:v;a(q).each(function(){(m=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1)||"right"!==this.align||(this.formatter&&-1!==a.inArray(this.formatter,A)?C=Math.max(C,parseInt(this.width,10)):D=Math.max(D,parseInt(this.width,10)))});F=0!==C?C:0!==D?D:0;a(q).each(function(b){h=
this.name;r=!1;t=(m=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1)?"style='display:none'":"";H="boolean"!==typeof this.viewable?!0:this.viewable;if("cb"!==h&&"subgrid"!==h&&"rn"!==h&&H){p=!1===w?"":u.getDataFieldOfCell.call(l,l.rows[w],b).html();r="right"===this.align&&0!==F?!0:!1;var g=a.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),d=parseInt(g.rowpos,10)||n+1,f=parseInt(2*(parseInt(g.colpos,10)||1),10);if(g.rowabove){var q=a("<tr><td class='contentinfo' colspan='"+
2*e+"'>"+g.rowcontent+"</td></tr>");a(c).append(q);q[0].rp=d}k=a(c).find("tr[data-rowpos="+d+"]");0===k.length&&(k=a("<tr "+t+" data-rowpos='"+d+"'></tr>").addClass("FormData").attr("id","trv_"+h),a(k).append(E),a(c).append(k),k[0].rp=d);g=void 0===g.label?z.colNames[b]:g.label;d=a("td:eq("+(f-1)+")",k[0]);a("td:eq("+(f-2)+")",k[0]).html("<b>"+(g||"&nbsp;")+"</b>");d[la(d.html())?"html":"append"]("<span>"+(p||"&nbsp;")+"</span>").attr("id","v_"+h);r&&a("td:eq("+(f-1)+") span",k[0]).css({"text-align":"right",
width:F+"px"});x[n]=b;n++}});0<n&&(b=a("<tr class='FormData' style='display:none'><td class='CaptionTD'>&#160;</td><td colspan='"+(2*e-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+b+"'/></td></tr>"),b[0].rp=n+99,a(c).append(b));return x}function k(b){var c,d,e=0,h=G.getInd.call(f,b,!0),k;h&&(a("td",h).each(function(b){k=q[b];c=k.name;d=k.editrules&&!0===k.editrules.edithidden?!1:!0===k.hidden?!0:!1;"cb"!==c&&"subgrid"!==c&&"rn"!==c&&(c=D("v_"+c),a("#"+c+
" span",v).html(u.getDataFieldOfCell.call(l,h,b).html()),d&&a("#"+c,v).parents("tr:first").hide(),e++)}),0<e&&a("#id_g",v).val(b))}function c(b,c){var d=c[1].length-1;0===b?a("#pData",t).addClass(E):void 0!==c[1][b-1]&&T(a("#"+D(c[1][b-1])),E)?a("#pData",t).addClass(E):a("#pData",t).removeClass(E);b===d?a("#nData",t).addClass(E):void 0!==c[1][b+1]&&T(a("#"+D(c[1][b+1])),E)?a("#nData",t).addClass(E):a("#nData",t).removeClass(E)}function e(){var b=G.getDataIDs.call(f),c=a("#id_g",v).val();return[a.inArray(c,
b),b]}var l=this,f=a(l),z=l.p;if(l.grid&&null!=z&&p){var C=z.id,d=a.extend(!0,{top:0,left:0,width:0,datawidth:"auto",height:"auto",dataheight:"auto",drag:!0,resize:!0,closeOnEscape:!1,labelswidth:"30%",navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,recreateForm:!1,removemodal:!0,form:"view"},G.getGridRes.call(f,"view"),u.view||{},z.formViewing||{},O||{}),n="#ViewGrid_"+D(C),v="#ViewTbl_"+D(C),t=v+"_2",A="ViewGrid_"+C,H="ViewTbl_"+C,I=d.commonIconClass,
b={themodal:"viewmod"+C,modalhead:"viewhd"+C,modalcontent:"viewcnt"+C,resizeAlso:A},y="#"+D(b.themodal),K=z.gBox,q=z.colModel,F=1,x=0,B=function(){var b=a.makeArray(arguments);b.unshift("");b.unshift("View");b.unshift(d);return ma.apply(l,b)},w=P.call(l,"hover"),E=P.call(l,"disabled");d.recreateForm||f.data("viewProp")&&a.extend(d,f.data("viewProp"));var C=isNaN(d.dataheight)?d.dataheight:d.dataheight+"px",M=isNaN(d.datawidth)?d.datawidth:d.datawidth+"px",A=a("<form name='FormPost' id='"+A+"' class='FormGrid' style='width:"+
M+";overflow:auto;position:relative;height:"+C+";'></form>"),V=a("<table id='"+H+"' class='EditTable' cellspacing='1' cellpadding='2' border='0' style='table-layout:fixed'><tbody></tbody></table>");a(q).each(function(){var a=this.formoptions;F=Math.max(F,a?a.colpos||0:0);x=Math.max(x,a?a.rowpos||0:0)});A.append(V);if(B("beforeInitData",A)){m(p,V,F);var da=(C="rtl"===z.direction?!0:!1)?"pData":"nData",M=Q.call(l,C?"nData":"pData","",S(I,d.prevIcon),"","left"),da=Q.call(l,da,"",S(I,d.nextIcon),"","right"),
ea=Q.call(l,"cData",d.bClose);if(0<x){var Z=[];a.each(a(V)[0].rows,function(a,b){Z[a]=b});Z.sort(function(a,b){return a.rp>b.rp?1:a.rp<b.rp?-1:0});a.each(Z,function(b,c){a("tbody",V).append(c)})}d.gbox=K;H=a("<div></div>").append(A).append("<table border='0' class='EditTable' id='"+H+"_2'><tbody><tr id='Act_Buttons'><td class='navButton navButton-"+z.direction+"' width='"+(d.labelswidth||"auto")+"'>"+(C?da+M:M+da)+"</td><td class='EditButton EditButton-"+z.direction+"'>"+ea+"</td></tr></tbody></table>");
ga.call(l,b,H,d,z.gView,a(z.gView)[0]);d.viewPagerButtons||a("#pData, #nData",t).hide();H=null;a(y).keydown(function(b){var c,e;if(!0===a(n).data("disabled"))return!1;if(13===b.which&&(c=a(t).find(":focus"),e=c.attr("id"),0<c.length&&0<=a.inArray(e,["pData","nData","cData"])))return c.trigger("click"),!1;if(27===b.which)return d.closeOnEscape&&L(y,{gb:K,jqm:d.jqModal,onClose:d.onClose,removemodal:d.removemodal,formprop:!d.recreateForm,form:d.form}),!1;if(!0===d.navkeys[0]){if(b.which===d.navkeys[1])return a("#pData",
t).trigger("click"),!1;if(b.which===d.navkeys[2])return a("#nData",t).trigger("click"),!1}});ca(a("#cData",t),d.closeicon,I);B("beforeShowForm",a(n));fa(y,{gbox:K,jqm:d.jqModal,overlay:d.overlay,toTop:d.toTop,modal:d.modal,onHide:function(a){pa.call(f,"viewProp",n,a)}});a(".fm-button:not(."+E.split(" ").join(".")+")",t).hover(function(){a(this).addClass(w)},function(){a(this).removeClass(w)});h();a("#cData",t).click(function(){L(y,{gb:K,jqm:d.jqModal,onClose:d.onClose,removemodal:d.removemodal,formprop:!d.recreateForm,
form:d.form});return!1});a("#nData",t).click(function(){a("#FormError",v).hide();var b=e();b[0]=parseInt(b[0],10);if(-1!==b[0]&&b[1][b[0]+1]){if(!B("onclickPgButtons","next",a(n),b[1][b[0]]))return!1;k(b[1][b[0]+1]);G.setSelection.call(f,b[1][b[0]+1]);B("afterclickPgButtons","next",a(n),b[1][b[0]+1]);c(b[0]+1,b)}h();return!1});a("#pData",t).click(function(){a("#FormError",v).hide();var b=e();if(-1!==b[0]&&b[1][b[0]-1]){if(!B("onclickPgButtons","prev",a(n),b[1][b[0]]))return!1;k(b[1][b[0]-1]);G.setSelection.call(f,
b[1][b[0]-1]);B("afterclickPgButtons","prev",a(n),b[1][b[0]-1]);c(b[0]-1,b)}h();return!1});I=e();c(I[0],I)}}})},delGridRow:function(p,O){return this.each(function(){var h=this,m=h.p,k=a(h);if(h.grid&&null!=m&&p){var c=m.id,e=a.extend(!0,{top:0,left:0,width:240,removemodal:!0,height:"auto",dataheight:"auto",drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,closeOnEscape:!1,delData:{},
onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},G.getGridRes.call(k,"del"),u.del||{},m.formDeleting||{},O||{}),l="DelTbl_"+c,f="#DelTbl_"+D(c),z,C,d,n,v={themodal:"delmod"+c,modalhead:"delhd"+c,modalcontent:"delcnt"+c,resizeAlso:l},t="#"+D(v.themodal),A=m.gBox,H=e.commonIconClass,I=function(){var b=a.makeArray(arguments);b.unshift("");b.unshift("Delete");b.unshift(e);return ma.apply(h,b)},b=P.call(h,"hover"),y=P.call(h,"active"),K=P.call(h,"error");a.isArray(p)||
(p=[String(p)]);if(void 0!==a(t)[0]){if(!I("beforeInitData",a(f)))return;a("#DelData>td",f).text(p.join()).data("rowids",p);a("#DelError",f).hide();!0===e.processing&&(e.processing=!1,a("#dData",f).removeClass(y));I("beforeShowForm",a(f));fa(t,{gbox:A,jqm:e.jqModal,jqM:!1,overlay:e.overlay,toTop:e.toTop,modal:e.modal})}else{var q=isNaN(e.dataheight)?e.dataheight:e.dataheight+"px",F=isNaN(e.datawidth)?e.datawidth:e.datawidth+"px",q="<div id='"+l+"' class='formdata' style='width:"+F+";overflow:auto;position:relative;height:"+
q+";'><table class='DelTable'><tbody>",q=q+("<tr id='DelError' style='display:none'><td class='"+K+"'></td></tr>"),q=q+("<tr id='DelData' style='display:none'><td >"+p.join()+"</td></tr>"),q=q+("<tr><td class='delmsg' style='white-space:pre;'>"+e.msg+"</td></tr><tr><td >&#160;</td></tr>"),q=q+"</tbody></table></div>",K=Q.call(h,"dData",e.bSubmit),F=Q.call(h,"eData",e.bCancel),q=q+("<table"+(u.msie&&8>u.msiever()?" cellspacing='0'":"")+" class='EditTable' id='"+l+"_2'><tbody><tr><td><hr class='"+Y.call(h,
"dialog.hr")+"' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton EditButton-"+m.direction+"'>"+K+"&#160;"+F+"</td></tr></tbody></table>");e.gbox=A;ga.call(h,v,q,e,m.gView,a(m.gView)[0]);a("#DelData>td",f).data("rowids",p);if(!I("beforeInitData",a(q)))return;a(".fm-button",f+"_2").hover(function(){a(this).addClass(b)},function(){a(this).removeClass(b)});ca(a("#dData",f+"_2"),e.delicon,H);ca(a("#eData",f+"_2"),e.cancelicon,H);a("#dData",f+"_2").click(function(){var b=[!0,""],l,p=a("#DelData>td",
f),q=p.text(),v=p.data("rowids"),p={};a.isFunction(e.onclickSubmit)&&(p=e.onclickSubmit.call(h,e,q)||{});a.isFunction(e.beforeSubmit)&&(b=e.beforeSubmit.call(h,q));if(b[0]&&!e.processing){e.processing=!0;d=m.prmNames;z=a.extend({},e.delData,p);n=d.oper;z[n]=d.deloper;C=d.id;q=v.slice();if(!q.length)return!1;for(l in q)q.hasOwnProperty(l)&&(q[l]=u.stripPref(m.idPrefix,q[l]));z[C]=q.join();a(this).addClass(y);l=e.url||m.editurl;l=a.extend({url:a.isFunction(l)?l.call(h,z[C],z,e):l,type:e.mtype,data:a.isFunction(e.serializeDelData)?
e.serializeDelData.call(h,z):z,complete:function(c,d){var l;a("#dData",f+"_2").removeClass(y);300<=c.status&&304!==c.status||0===c.status&&4===c.readyState?(b[0]=!1,a.isFunction(e.errorTextFormat)?b[1]=e.errorTextFormat.call(h,c):b[1]=d+" Status: '"+c.statusText+"'. Error code: "+c.status):a.isFunction(e.afterSubmit)&&(b=e.afterSubmit.call(h,c,z));if(!1===b[0])a("#DelError>td",f).html(b[1]),a("#DelError",f).show();else{if(e.reloadAfterSubmit&&"local"!==m.datatype)k.trigger("reloadGrid",[a.extend({},
e.reloadGridOptions||{})]);else if(!0===m.treeGrid)try{G.delTreeNode.call(k,v[0])}catch(n){}else for(v=v.slice(),l=0;l<v.length;l++)G.delRowData.call(k,v[l]);setTimeout(function(){I("afterComplete",c,q,a(f))},50)}e.processing=!1;b[0]&&L(t,{gb:A,jqm:e.jqModal,onClose:e.onClose,removemodal:e.removemodal})}},u.ajaxOptions,e.ajaxDelOptions);l.url||e.useDataProxy||(a.isFunction(m.dataProxy)?e.useDataProxy=!0:(b[0]=!1,b[1]+=" "+u.errors.nourl));b[0]&&(e.useDataProxy?(l=m.dataProxy.call(h,l,"del_"+c),void 0===
l&&(l=[!0,""]),!1===l[0]?(b[0]=!1,b[1]=l[1]||"Error deleting the selected row!"):L(t,{gb:A,jqm:e.jqModal,onClose:e.onClose,removemodal:e.removemodal})):"clientArray"===l.url?(z=l.data,l.complete({status:200,statusText:""},"")):a.ajax(l))}!1===b[0]&&(a("#DelError>td",f).html(b[1]),a("#DelError",f).show());return!1});a("#eData",f+"_2").click(function(){L(t,{gb:A,jqm:e.jqModal,onClose:e.onClose,removemodal:e.removemodal});return!1});I("beforeShowForm",a(f));fa(t,{gbox:A,jqm:e.jqModal,overlay:e.overlay,
toTop:e.toTop,modal:e.modal})}I("afterShowForm",a(f));!0===e.closeOnEscape&&setTimeout(function(){a(".ui-jqdialog-titlebar-close","#"+D(v.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(p,O,h,m,k,c,e){"object"===typeof p&&(e=c,c=k,k=m,m=h,h=O,O=p,p=void 0);m=m||{};h=h||{};e=e||{};k=k||{};c=c||{};return this.each(function(){var l=this,f=l.p,z=a(l);if(l.grid&&null!=f&&!(l.nav&&0<a(p).find(".navtable").length)){var C=f.id,d=a.extend({edit:!0,add:!0,del:!0,search:!0,refresh:!0,refreshstate:"firstpage",
view:!1,closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,hideEmptyPagerParts:!0,alertwidth:200,alertheight:"auto",alerttop:null,removemodal:!0,alertleft:null,alertzIndex:null,iconsOverText:!1},G.getGridRes.call(z,"nav"),u.nav||{},f.navOptions||{},O||{});d.position=d.position||("rtl"===f.direction?"right":"left");var n,v=f.idSel,t=f.gBox,A=d.commonIconClass,H={themodal:"alertmod_"+C,modalhead:"alerthd_"+C,modalcontent:"alertcnt_"+C},I=function(){return function(){var b=document.documentElement,
c=window,e=1024,g=768,h=z.closest(".ui-jqgrid").offset();void 0===a("#"+D(H.themodal))[0]&&(d.alerttop||d.alertleft||(void 0!==c.innerWidth?(e=c.innerWidth,g=c.innerHeight):null!=b&&void 0!==b.clientWidth&&0!==b.clientWidth&&(e=b.clientWidth,g=b.clientHeight),e=e/2-parseInt(d.alertwidth,10)/2-h.left,g=g/2-25-h.top),ga.call(l,H,"<div>"+d.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='"+C+"_jqg_alrt'></span></span>",{gbox:t,jqModal:d.jqModal,drag:!0,resize:!0,caption:d.alertcap,top:null!=
d.alerttop?d.alerttop:g,left:null!=d.alertleft?d.alertleft:e,width:d.alertwidth,height:d.alertheight,closeOnEscape:d.closeOnEscape,zIndex:d.alertzIndex,removemodal:d.removemodal},f.gView,a(t)[0],!1));fa("#"+D(H.themodal),{gbox:t,toTop:d.alertToTop,jqm:d.jqModal});var k=a("#"+D(H.modalhead)).find(".ui-jqdialog-titlebar-close");k.attr({tabindex:"0",href:"#",role:"button"});setTimeout(function(){k.focus()},50)}}(),b,y=function(b){if(13===b.which&&(b=a(this).find(".ui-pg-button").filter(":focus"),0<b.length))return b.trigger("click"),
!1},K=P.call(l,"hover"),q=P.call(l,"disabled");if(l.grid){l.modalAlert=I;void 0===p&&(f.pager?(p=f.pager,f.toppager&&(d.cloneToTop=!0)):f.toppager&&(p=f.toppager));var F=1,x,B,w,E,M,L=["left","center","right"],Q="<div class='ui-pg-button "+q+"'><span class='ui-separator'></span></div>",U=function(){T(this,q)||a(this).addClass(K)},Z=function(){a(this).removeClass(K)},g=function(){T(this,q)||(a.isFunction(d.addfunc)?d.addfunc.call(l):G.editGridRow.call(z,"new",m));return!1},R=function(b,c,d){if(!T(this,
q)){var e=f.selrow;e?a.isFunction(b)?b.call(l,e):G[c].call(z,e,d):I()}return!1},J=function(){return R.call(this,d.editfunc,"editGridRow",h)},ia=function(){return R.call(this,d.viewfunc,"viewGridRow",e)},ha=function(){var b;T(this,q)||(f.multiselect?(b=f.selarrrow,0===b.length&&(b=null)):b=f.selrow,b?a.isFunction(d.delfunc)?d.delfunc.call(l,b):G.delGridRow.call(z,b,k):I());return!1},W=function(){T(this,q)||(a.isFunction(d.searchfunc)?d.searchfunc.call(l,c):G.searchGrid.call(z,c));return!1},ca=function(){if(!T(this,
q)){a.isFunction(d.beforeRefresh)&&d.beforeRefresh.call(l);f.search=!1;f.resetsearch=!0;try{if("currentfilter"!==d.refreshstate){f.postData.filters="";try{a("#fbox_"+v).jqFilter("resetFilter")}catch(b){}a.isFunction(l.clearToolbar)&&l.clearToolbar(!1)}}catch(b){}switch(d.refreshstate){case "firstpage":z.trigger("reloadGrid",[a.extend({},d.reloadGridOptions||{},{page:1})]);break;case "current":case "currentfilter":z.trigger("reloadGrid",[a.extend({},d.reloadGridOptions||{},{current:!0})])}a.isFunction(d.afterRefresh)&&
d.afterRefresh.call(l)}return!1},N=function(b,c,e,f,g){var h=a("<div class='ui-pg-button ui-corner-all' tabindex='0' role='button'></div>"),k=d[b+"icon"],l=a.trim(d[b+"text"]);h.append("<div class='ui-pg-div'><span class='"+(d.iconsOverText?S("ui-pg-button-icon-over-text",A,k):S(A,k))+"'></span>"+(l?"<span class='ui-pg-button-text"+(d.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+l+"</span>":"")+"</div>");a(f).append(h);h.attr({title:d[b+"title"]||"",id:c||b+"_"+g}).click(e).hover(U,Z);return h};
d.cloneToTop&&f.toppager&&(F=2);for(x=0;x<F;x++){b=a("<div class='ui-pg-table navtable' role='toolbar' style='float:"+("rtl"===f.direction?"right":"left")+";table-layout:auto;'></div>");0===x?(B=p,w=C,B===f.toppager&&(w+="_top",F=1)):(B=f.toppager,w=C+"_top");d.add&&N("add",m.id,g,b,w);d.edit&&N("edit",h.id,J,b,w);d.view&&N("view",e.id,ia,b,w);d.del&&N("del",k.id,ha,b,w);(d.add||d.edit||d.del||d.view)&&a(b).append(Q);d.search&&(n=N("search",c.id,W,b,w),c.showOnLoad&&!0===c.showOnLoad&&a(n,b).click());
d.refresh&&N("refresh","",ca,b,w);n=a(".ui-jqgrid>.ui-jqgrid-view").css("font-size")||"11px";a("body").append("<div id='testpg2' class='"+Y.call(l,"gBox","ui-jqgrid")+"' style='font-size:"+n+";visibility:hidden;' ></div>");n=a(b).clone().appendTo("#testpg2").width();a("#testpg2").remove();a(B+"_"+d.position,B).append(b);if(d.hideEmptyPagerParts)for(w=0;w<L.length;w++)L[w]!==d.position&&(M=a(B+"_"+L[w],B),0===M.length||0===M[0].childNodes.length?M.hide():1===M[0].childNodes.length&&(E=M[0].firstChild,
!a(E).is("table.ui-pg-table")||0!==E.rows&&0!==E.rows[0].cells.length||M.hide()));f._nvtd&&(n>f._nvtd[0]&&(a(B+"_"+d.position,B).width(n),f._nvtd[0]=n),f._nvtd[1]=n);l.nav=!0;b.bind("keydown.jqGrid",y)}z.triggerHandler("jqGridResetFrozenHeights")}}})},navButtonAdd:function(p,O){"object"===typeof p&&(O=p,p=void 0);return this.each(function(){var h=this,m=h.p;if(h.grid){var k=a.extend({caption:"newButton",title:"",onClickButton:null,position:"last",cursor:"pointer",iconsOverText:!1},G.getGridRes.call(a(h),
"nav"),u.nav||{},m.navOptions||{},O||{}),c=P.call(h,"hover"),e=P.call(h,"disabled");if(void 0===p)if(m.pager)if(G.navButtonAdd.call(a(h),m.pager,k),m.toppager)p=m.toppager;else return;else m.toppager&&(p=m.toppager);"string"===typeof p&&0!==p.indexOf("#")&&(p="#"+D(p));var m=a(".navtable",p),l=k.commonIconClass;if(0<m.length&&!(k.id&&0<m.find("#"+D(k.id)).length)){var f=a("<div tabindex='0' role='button'></div>");"NONE"===k.buttonicon.toString().toUpperCase()?a(f).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'>"+
(k.caption?"<span class='ui-pg-button-text"+(k.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+k.caption+"</span>":"")+"</div>"):a(f).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'><span class='"+(k.iconsOverText?S("ui-pg-button-icon-over-text",l,k.buttonicon):S(l,k.buttonicon))+"'></span>"+(k.caption?"<span class='ui-pg-button-text"+(k.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+k.caption+"</span>":"")+"</div>");k.id&&a(f).attr("id",k.id);"first"===k.position&&
0<m.children("div.ui-pg-button").length?m.children("div.ui-pg-button").first().before(f):m.append(f);a(f,m).attr("title",k.title||"").click(function(c){T(this,e)||a.isFunction(k.onClickButton)&&k.onClickButton.call(h,k,c);return!1}).hover(function(){T(this,e)||a(this).addClass(c)},function(){a(this).removeClass(c)});a(h).triggerHandler("jqGridResetFrozenHeights")}}})},navSeparatorAdd:function(p,u){u=a.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},u||{});return this.each(function(){if(this.grid){"string"===
typeof p&&0!==p.indexOf("#")&&(p="#"+D(p));var h=a(".navtable",p)[0];if(0<h.length){var m="<div class='ui-pg-button "+P.call(this,"disabled")+"'><span class='"+u.sepclass+"'></span>"+u.sepcontent+"</div>";"first"===u.position?0===a(">div.ui-pg-button",h).length?h.append(m):a(">div.ui-pg-button",h).first().before(m):h.append(m)}}})},GridToForm:function(p,u){return this.each(function(){var h,m,k,c;if(this.grid){var e=G.getRowData.call(a(this),p),l=this.p.propOrAttr;if(e)for(h in e)if(e.hasOwnProperty(h))if(m=
a("[name="+D(h)+"]",u),m.is("input:radio")||m.is("input:checkbox"))for(k=0;k<m.length;k++)c=a(m[k]),c[l]("checked",c.val()===String(e[h]));else m.val(la(e[h])?"":e[h])}})},FormToGrid:function(p,u,h,m){return this.each(function(){if(this.grid){h||(h="set");m||(m="first");var k=a(u).serializeArray(),c={};a.each(k,function(a,h){c[h.name]=h.value});"add"===h?G.addRowData.call(a(this),p,c,m):"set"===h&&G.setRowData.call(a(this),p,c)}})}})});
/*
//# sourceMappingURL=grid.formedit.map
*/