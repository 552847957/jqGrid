(function(a){"function"===typeof define&&define.amd?define(["jquery","./grid.base","./jquery.fmatter","./grid.common","./jsonxml"],a):"object"===typeof exports?a(require("jquery")):a(jQuery)})(function(a){var u=a.jgrid,G=u.jqID,B=a.fn.jqGrid,M=B.getGuiStyles,U=u.mergeCssClasses,S=u.hasOneFromClasses,ja=u.feedback,ka=u.fullBoolFeedback,N=u.builderFmButon,ca=function(a,u,e){!0===u[0]&&(e="<span class='"+U("fm-button-icon",e,u[2])+"'></span>","right"===u[1]?a.addClass("fm-button-icon-right").append(e):
a.addClass("fm-button-icon-left").prepend(e))},P=function(a){return M.call(this,"states."+a)},ha=function(a){return"&nbsp;"===a||"&#160;"===a||1===a.length&&160===a.charCodeAt(0)};u.extend({searchGrid:function(p){return this.each(function(){function Q(b){t("beforeShow",b)&&(a(w).data("onClose",c.onClose),u.viewModal.call(e,w,{gbox:D,jqm:c.jqModal,overlay:c.overlay,modal:c.modal,overlayClass:c.overlayClass,toTop:c.toTop,onHide:function(a){a.w.remove();a.o&&a.o.remove()}}),t("afterShow",b))}var e=this,
v=a(e),m=e.p;if(e.grid&&null!=m){var c=a.extend(!0,{drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,removemodal:!0,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:void 0,
onClose:null,onSearch:null,onReset:null,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE","in":"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"IS NOT NULL"}},B.getGridRes.call(v,"search"),u.search||{},m.searching||{},p||{}),g="fbox_"+m.id,h=c.commonIconClass,f={themodal:"searchmod"+g,modalhead:"searchhd"+g,modalcontent:"searchcnt"+g,resizeAlso:g},
w="#"+G(f.themodal),D=m.gBox,d=m.gView,r=a.each,q=m.postData[c.sFilter],t=function(){var b=a.makeArray(arguments);b.unshift("Search");b.unshift("Filter");b.unshift(c);return ja.apply(e,b)},C=function(){u.hideModal(w,{gb:D,jqm:c.jqModal,onClose:c.onClose,removemodal:c.removemodal})};"string"===typeof q&&(q=""!==a.trim(q)?a.parseJSON(q):void 0);a(w).remove();if(void 0!==a(w)[0])Q(a("#fbox_"+m.idSel));else{var I=a("<div><div id='"+g+"' class='"+M.call(e,"dialog.body","searchFilter")+"' style='overflow:auto'></div></div>").insertBefore(d);
"rtl"===m.direction&&I.attr("dir","rtl");var J="",b="",y,K=!1,x,E=-1,l=a.extend([],m.colModel);x=N.call(e,g+"_search",c.Find,U(h,c.findDialogIcon),"right");var L=N.call(e,g+"_reset",c.Reset,U(h,c.resetDialogIcon),"left");c.showQuery&&(J=N.call(e,g+"_query","Query",U(h,c.queryDialogIcon),"left")+"&#160;");c.searchForAdditionalProperties&&r(m.additionalProperties,function(){var a="string"===typeof this?{name:this}:this;a.label||(a.label=a.name);a.isAddProp=!0;l.push(a)});c.columns.length?(l=c.columns,
E=0,y=l[0].index||l[0].name):r(l,function(a,b){b.label||(b.label=b.isAddProp?b.name:m.colNames[a]);if(!K){var c=void 0===b.search?!0:b.search,g=!0===b.hidden;if(b.searchoptions&&!0===b.searchoptions.searchhidden&&c||c&&!g)K=!0,y=b.index||b.name,E=a}});if(!q&&y||!1===c.multipleSearch)h="eq",0<=E&&l[E].searchoptions&&l[E].searchoptions.sopt?h=l[E].searchoptions.sopt[0]:c.sopt&&c.sopt.length&&(h=c.sopt[0]),q={groupOp:"AND",rules:[{field:y,op:h,data:""}]};K=!1;c.tmplNames&&c.tmplNames.length&&(K=!0,b=
c.tmplLabel,b+="<select class='ui-template'>",b+="<option value='default'>Default</option>",r(c.tmplNames,function(a,c){b+="<option value='"+a+"'>"+c+"</option>"}),b+="</select>");x="<div class='"+M.call(e,"dialog.footer")+"'><table class='EditTable' style='border:0px none;margin-top:5px' id='"+g+"_2'><tbody><tr><td colspan='2'><hr class='"+M.call(e,"dialog.hr")+"' style='margin:1px'/></td></tr><tr><td class='EditButton EditButton-"+m.direction+"'  style='float:"+("rtl"===m.direction?"right":"left")+
";'>"+L+b+"</td><td class='EditButton EditButton-"+m.direction+"'>"+J+x+"</td></tr></tbody></table></div>";g=G(g);c.gbox=D;c.height="auto";g="#"+g;a(g).jqFilter({columns:l,filter:c.loadDefaults?q:null,showQuery:c.showQuery,errorcheck:c.errorcheck,sopt:c.sopt,groupButton:c.multipleGroup,ruleButtons:c.multipleSearch,afterRedraw:c.afterRedraw,ops:c.odata,cops:m.customSortOperations,operands:c.operands,ajaxSelectOptions:m.ajaxSelectOptions,groupOps:c.groupOps,onChange:function(){this.p.showQuery&&a(".query",
this).html(this.toUserFriendlyString());ka.call(e,c.afterChange,"jqGridFilterAfterChange",a(g),c)},direction:m.direction,id:m.id});I.append(x);K&&c.tmplFilters&&c.tmplFilters.length&&a(".ui-template",I).bind("change",function(){var b=a(this).val();"default"===b?a(g).jqFilter("addFilter",q):a(g).jqFilter("addFilter",c.tmplFilters[parseInt(b,10)]);return!1});!0===c.multipleGroup&&(c.multipleSearch=!0);t("onInitialize",a(g));c.layer?u.createModal.call(e,f,I,c,d,a(D)[0],"#"+G(c.layer),{position:"relative"}):
u.createModal.call(e,f,I,c,d,a(D)[0]);(c.searchOnEnter||c.closeOnEscape)&&a(w).keydown(function(b){var d=a(b.target);if(!(!c.searchOnEnter||13!==b.which||d.hasClass("add-group")||d.hasClass("add-rule")||d.hasClass("delete-group")||d.hasClass("delete-rule")||d.hasClass("fm-button")&&d.is("[id$=_query]")))return a(g+"_search").click(),!1;if(c.closeOnEscape&&27===b.which)return a("#"+G(f.modalhead)).find(".ui-jqdialog-titlebar-close").click(),!1});J&&a(g+"_query").bind("click",function(){a(".queryresult",
I).toggle();return!1});void 0===c.stringResult&&(c.stringResult=c.multipleSearch);a(g+"_search").bind("click",function(){var b={},d,f,t=a(g);f=t.find(".input-elm");f.filter(":focus")&&(f=f.filter(":focus"));f.change();f=t.jqFilter("filterData");if(c.errorcheck&&(t[0].hideError(),c.showQuery||t.jqFilter("toSQLString"),t[0].p.error))return t[0].showError(),!1;if(c.stringResult||"local"===m.datatype){try{d=xmlJsonClass.toJson(f,"","",!1)}catch(l){try{d=JSON.stringify(f)}catch(k){}}"string"===typeof d&&
(b[c.sFilter]=d,r([c.sField,c.sValue,c.sOper],function(){b[this]=""}))}else c.multipleSearch?(b[c.sFilter]=f,r([c.sField,c.sValue,c.sOper],function(){b[this]=""})):(b[c.sField]=f.rules[0].field,b[c.sValue]=f.rules[0].data,b[c.sOper]=f.rules[0].op,b[c.sFilter]="");m.search=!0;a.extend(m.postData,b);ka.call(e,c.onSearch,"jqGridFilterSearch",m.filters)&&v.trigger("reloadGrid",[a.extend({page:1},c.reloadGridSearchOptions||{})]);c.closeAfterSearch&&C();return!1});a(g+"_reset").bind("click",function(){var b=
{},d=a(g);m.search=!1;m.resetsearch=!0;!1===c.multipleSearch?b[c.sField]=b[c.sValue]=b[c.sOper]="":b[c.sFilter]="";d[0].resetFilter();K&&a(".ui-template",I).val("default");a.extend(m.postData,b);ka.call(e,c.onReset,"jqGridFilterReset")&&v.trigger("reloadGrid",[a.extend({page:1},c.reloadGridResetOptions||{})]);c.closeAfterReset&&C();return!1});Q(a(g));var z=P.call(e,"hover");a(".fm-button:not(."+P.call(e,"disabled").split(" ").join(".")+")",I).hover(function(){a(this).addClass(z)},function(){a(this).removeClass(z)})}}})},
editGridRow:function(p,Q){return this.each(function(){function e(){a(E+" > tbody > tr > td .FormElement").each(function(){var n=a(".customelement",this),c=this.name;if(n.length){if(c=n.attr("name"),n=da[c],void 0!==n&&(n=O[n],n=n.editoptions||{},a.isFunction(n.custom_value))){try{if(k[c]=n.custom_value.call(r,a("#"+G(c),E),"get"),void 0===k[c])throw"e1";}catch(d){"e1"===d?u.info_dialog.call(r,ea,"function 'custom_value' "+b.msg.novalue,b.bClose):u.info_dialog.call(r,ea,d.message,b.bClose)}return!0}}else switch(n=
a(this)[0].type,n){case "checkbox":k[c]=a(this).is(":checked")?a(this).val():a(this).data("offval");break;case "select-one":k[c]=a("option:selected",this).val();break;case "select-multiple":k[c]=a(this).val();k[c]=k[c]?k[c].join(","):"";a("option:selected",this).each(function(b,n){a(n).text()});break;case "date":k[c]=a(this).val();3===String(k[c]).split("-").length&&(n=da[c],void 0!==n&&(n=O[n],n=n.formatoptions||{},n=n.newformat||I.call(q,"formatter.date.newformat"),k[c]=u.parseDate.call(q[0],"Y-m-d",
k[c],n)));break;default:void 0!==n&&0>a.inArray(n,b.skipPostTypes)&&(k[c]=a(this).val())}});return!0}function v(n,c,d){var g=0,A=[],e=!1,k="",f;for(f=1;f<=d;f++)k+="<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>";"_empty"!==n&&(e=B.getInd.call(q,n));a(O).each(function(f){var m=this.name,l,h,p,v,q;l=this.editable;var w=!1,x=!1;q="_empty"===n?"addForm":"editForm";a.isFunction(l)&&(l=l.call(r,{rowid:n,iCol:f,iRow:e,cmName:m,cm:this,mode:q}));v=(this.editrules&&!0===this.editrules.edithidden?
0:!0===this.hidden||"hidden"===l)?"style='display:none'":"";switch(String(l).toLowerCase()){case "hidden":l=!0;break;case "disabled":w=l=!0;break;case "readonly":x=l=!0}if("cb"!==m&&"subgrid"!==m&&!0===l&&"rn"!==m){if(!1===e)p="";else{l=a(r.rows[e].cells[f]);try{p=a.unformat.call(r,l,{rowId:n,colModel:this},f)}catch(F){p=this.edittype&&"textarea"===this.edittype?l.text():l.html()}ha(p)&&(p="")}l=a.extend({},this.editoptions||{},{id:m,name:m,rowId:n,mode:q});var H=a.extend({},{elmprefix:"",elmsuffix:"",
rowabove:!1,rowcontent:""},this.formoptions||{}),z=parseInt(H.rowpos,10)||g+1,L=parseInt(2*(parseInt(H.colpos,10)||1),10);"_empty"===n&&l.defaultValue&&(p=a.isFunction(l.defaultValue)?l.defaultValue.call(r):l.defaultValue);this.edittype||(this.edittype="text");t.autoEncodeOnEdit&&(p=u.oldDecodePostedData(p));q=u.createEl.call(r,this.edittype,l,p,!1,a.extend({},u.ajaxOptions,t.ajaxSelectOptions||{}));if(b.checkOnSubmit||b.checkOnUpdate)b._savedData[m]=p;a(q).addClass("FormElement");-1<a.inArray(this.edittype,
["text","textarea","checkbox","password","select"])&&a(q).addClass(M.call(r,"dialog.dataField"));h=a(c).find("tr[data-rowpos="+z+"]");if(H.rowabove){var B=a("<tr><td class='contentinfo' colspan='"+2*d+"'>"+H.rowcontent+"</td></tr>");a(c).append(B);B[0].rp=z}0===h.length&&(h=a("<tr "+v+" data-rowpos='"+z+"'></tr>").addClass("FormData").attr("id","tr_"+m),a(h).append(k),a(c).append(h),h[0].rp=z);v=a("td:eq("+(L-2)+")",h[0]);h=a("td:eq("+(L-1)+")",h[0]);v.html(void 0===H.label?t.colNames[f]:H.label||
"&#160;");h[ha(h.html())?"html":"append"](H.elmprefix).append(q).append(H.elmsuffix);w?(v.addClass(T),h.addClass(T),a(q).prop("readonly",!0),a(q).prop("disabled",!0)):x&&a(q).prop("readonly",!0);"custom"===this.edittype&&a.isFunction(l.custom_value)&&l.custom_value.call(r,a("#"+G(m),y),"set",p);u.bindEv.call(r,q,l);A[g]=f;g++}});0<g&&(f=a("<tr class='FormData' style='display:none'><td class='CaptionTD'>&#160;</td><td colspan='"+(2*d-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+
C+"_id' value='"+n+"'/></td></tr>"),f[0].rp=g+999,a(c).append(f),b.checkOnSubmit||b.checkOnUpdate)&&(b._savedData[C+"_id"]=n);return A}function m(n,c){var d,g=0,e,A,f,l;if(b.checkOnSubmit||b.checkOnUpdate)b._savedData={},b._savedData[C+"_id"]=n;var k=t.colModel;if("_empty"===n)a(k).each(function(){d=this.name;A=a.extend({},this.editoptions||{});(e=a("#"+G(d),c))&&e.length&&null!==e[0]&&(f="","custom"===this.edittype&&a.isFunction(A.custom_value)?A.custom_value.call(r,e,"set",f):A.defaultValue?(f=
a.isFunction(A.defaultValue)?A.defaultValue.call(r):A.defaultValue,"checkbox"===e[0].type?(l=f.toLowerCase(),0>l.search(/(false|f|0|no|n|off|undefined)/i)&&""!==l?(e[0].checked=!0,e[0].defaultChecked=!0,e[0].value=f):(e[0].checked=!1,e[0].defaultChecked=!1)):e.val(f)):"checkbox"===e[0].type?(e[0].checked=!1,e[0].defaultChecked=!1,f=a(e).data("offval")):e[0].type&&"select"===e[0].type.substr(0,6)?e[0].selectedIndex=0:e.val(f),!0===b.checkOnSubmit||b.checkOnUpdate)&&(b._savedData[d]=f)}),a("#id_g",
c).val(n);else{var m=B.getInd.call(q,n,!0);m&&(a(m.cells).filter("td[role=gridcell]").each(function(e){var f;d=k[e].name;if("cb"!==d&&"subgrid"!==d&&"rn"!==d&&!0===k[e].editable){try{f=a.unformat.call(r,a(this),{rowId:n,colModel:k[e]},e)}catch(A){f="textarea"===k[e].edittype?a(this).text():a(this).html()}t.autoEncodeOnEdit&&(f=u.oldDecodePostedData(f));if(!0===b.checkOnSubmit||b.checkOnUpdate)b._savedData[d]=f;d="#"+G(d);switch(k[e].edittype){case "password":case "text":case "button":case "image":case "textarea":ha(f)&&
(f="");a(d,c).val(f);break;case "select":var l=f.split(","),l=a.map(l,function(b){return a.trim(b)});a(d+" option",c).each(function(){var b=a(this),n=a.trim(b.val()),b=a.trim(b.text());k[e].editoptions.multiple||a.trim(f)!==b&&l[0]!==b&&l[0]!==n?k[e].editoptions.multiple?-1<a.inArray(b,l)||-1<a.inArray(n,l)?this.selected=!0:this.selected=!1:this.selected=!1:this.selected=!0});break;case "checkbox":f=String(f);k[e].editoptions&&k[e].editoptions.value?f=k[e].editoptions.value.split(":")[0]===f:(f=f.toLowerCase(),
f=0>f.search(/(false|f|0|no|n|off|undefined)/i)&&""!==f);a(d,c).prop({checked:f,defaultChecked:f});break;case "custom":try{if(k[e].editoptions&&a.isFunction(k[e].editoptions.custom_value))k[e].editoptions.custom_value.call(r,a(d,c),"set",f);else throw"e1";}catch(A){"e1"===A?u.info_dialog.call(r,ea,"function 'custom_value' "+b.msg.nodefined,b.bClose):u.info_dialog.call(r,ea,A.message,b.bClose)}}g++}}),0<g&&a("#id_g",E).val(n))}}function c(){var n=b.url||t.editurl;a.each(O,function(b,c){var d=c.name,
e=k[d];"date"!==c.formatter||null!=c.formatoptions&&!0===c.formatoptions.sendFormatted||(k[d]=a.unformat.date.call(r,e,c));"clientArray"!==n&&c.editoptions&&!0===c.editoptions.NullIfEmpty&&k.hasOwnProperty(d)&&""===e&&(k[d]="null")})}function g(){var n=[!0,"",""],d={},e=t.prmNames,f,g,h,v,w,H,x=B.getInd.call(q,p),z=!1===x?null:r.rows[x];(H=q.triggerHandler("jqGridAddEditBeforeCheckValues",[a(y),A]))&&"object"===typeof H&&(k=H);x=!1===x?-1:x;a.isFunction(b.beforeCheckValues)&&(H=b.beforeCheckValues.call(r,
k,a(y),A))&&"object"===typeof H&&(k=H);for(h in k)if(k.hasOwnProperty(h)&&(H=t.iColByName[h],n=u.checkValues.call(r,k[h],h,void 0,void 0,{oldValue:"_empty"===p?null:B.getCell.call(q,p,H),newValue:k[h],cmName:h,rowid:p,cm:O[H],iCol:H,iRow:x,tr:z,td:null==z?null:z.cells[H],mode:"_empty"===p?"addForm":"editForm"}),!1===n[0]))break;c();n[0]&&(d=q.triggerHandler("jqGridAddEditClickSubmit",[b,k,A]),void 0===d&&a.isFunction(b.onclickSubmit)&&(d=b.onclickSubmit.call(r,b,k,A)||{}),n=q.triggerHandler("jqGridAddEditBeforeSubmit",
[k,a(y),A]),null==n&&(n=[!0,"",""]),n[0]&&a.isFunction(b.beforeSubmit)&&(n=b.beforeSubmit.call(r,k,a(y),A),null==n&&(n=[!0,"",""])));if(n[0]&&!b.processing){b.processing=!0;a("#sData",l).addClass(oa);h=b.url||t.editurl;g=e.oper;f="clientArray"===h&&!1!==t.keyName?t.keyName:e.id;k[g]="_empty"===a.trim(k[C+"_id"])?e.addoper:e.editoper;k[g]!==e.addoper?k[f]=k[C+"_id"]:void 0===k[f]&&(k[f]=k[C+"_id"]);delete k[C+"_id"];k=a.extend(k,b.editData,d);if(!0===t.treeGrid)for(w in k[g]===e.addoper&&(v=t.selrow,
k["adjacency"===t.treeGridModel?t.treeReader.parent_id_field:"parent_id"]=v),t.treeReader)t.treeReader.hasOwnProperty(w)&&(d=t.treeReader[w],!k.hasOwnProperty(d)||k[g]===e.addoper&&"parent_id_field"===w||delete k[d]);k[f]=u.stripPref(t.idPrefix,k[f]);t.autoEncodeOnEdit&&a.each(k,function(b,n){a.isFunction(n)||(k[b]=u.oldEncodePostedData(n))});w=a.extend({url:a.isFunction(h)?h.call(r,k[f],A,k,b):h,type:a.isFunction(b.mtype)?b.mtype.call(r,A,b,k[f],k):b.mtype,data:u.serializeFeedback.call(r,a.isFunction(b.serializeEditData)?
b.serializeEditData:t.serializeEditData,"jqGridAddEditSerializeEditData",k),complete:function(c,d){a("#sData",l).removeClass(oa);k[f]=t.idPrefix+a("#id_g",E).val();300<=c.status&&304!==c.status||0===c.status&&4===c.readyState?(n[0]=!1,n[1]=q.triggerHandler("jqGridAddEditErrorTextFormat",[c,A]),a.isFunction(b.errorTextFormat)?n[1]=b.errorTextFormat.call(r,c,A):n[1]=d+" Status: '"+c.statusText+"'. Error code: "+c.status):(n=q.triggerHandler("jqGridAddEditAfterSubmit",[c,k,A]),null==n&&(n=[!0,"",""]),
n[0]&&a.isFunction(b.afterSubmit)&&(n=b.afterSubmit.call(r,c,k,A),null==n&&(n=[!0,"",""])));if(!1===n[0])a("#FormError>td",E).html(n[1]),a("#FormError",E).show();else{t.autoEncodeOnEdit&&a.each(k,function(a,b){k[a]=u.oldDecodePostedData(b)});var h=[a.extend({},b.reloadGridOptions||{})];k[g]===e.addoper?(n[2]||(n[2]=u.randId()),null==k[f]||"_empty"===k[f]||k[g]===e.addoper?k[f]=n[2]:n[2]=k[f],b.reloadAfterSubmit?q.trigger("reloadGrid",h):!0===t.treeGrid?B.addChildNode.call(q,n[2],v,k):B.addRowData.call(q,
n[2],k,b.addedrow),b.closeAfterAdd?(!0!==t.treeGrid&&J.call(q,n[2]),V()):b.clearAfterAdd&&m("_empty",y)):(b.reloadAfterSubmit?(q.trigger("reloadGrid",h),b.closeAfterEdit||setTimeout(function(){J.call(q,k[f])},1E3)):!0===t.treeGrid?B.setTreeRow.call(q,k[f],k):B.setRowData.call(q,k[f],k),b.closeAfterEdit&&V());if(a.isFunction(b.afterComplete)){var p=c;setTimeout(function(){q.triggerHandler("jqGridAddEditAfterComplete",[p,k,a(y),A]);b.afterComplete.call(r,p,k,a(y),A);p=null},50)}if(b.checkOnSubmit||
b.checkOnUpdate)if(a(y).data("disabled",!1),"_empty"!==b._savedData[C+"_id"])for(var w in b._savedData)b._savedData.hasOwnProperty(w)&&k[w]&&(b._savedData[w]=k[w])}b.processing=!1;try{a(":input:visible",y)[0].focus()}catch(H){}}},u.ajaxOptions,b.ajaxEditOptions);w.url||b.useDataProxy||(a.isFunction(t.dataProxy)?b.useDataProxy=!0:(n[0]=!1,n[1]+=" "+u.errors.nourl));n[0]&&(b.useDataProxy?(d=t.dataProxy.call(r,w,"set_"+C),void 0===d&&(d=[!0,""]),!1===d[0]?(n[0]=!1,n[1]=d[1]||"Error deleting the selected row!"):
(w.data.oper===e.addoper&&b.closeAfterAdd&&V(),w.data.oper===e.editoper&&b.closeAfterEdit&&V())):"clientArray"===w.url?(b.reloadAfterSubmit=!1,k=w.data,w.complete({status:200,statusText:""},"")):a.ajax(w))}!1===n[0]&&(a("#FormError>td",E).html(n[1]),a("#FormError",E).show())}function h(a,b){var c=!1,d;for(d in a)if(a.hasOwnProperty(d)&&String(a[d])!==String(b[d])){c=!0;break}return c}function f(){var c=!0;a("#FormError",E).hide();b.checkOnUpdate&&(k={},e(),aa=h(k,b._savedData))&&(a(y).data("disabled",
!0),a(".confirm",z).show(),c=!1);return c}function w(){var b=u.detectRowEditing.call(r,p);if(null!=b)if("inlineEditing"===b.mode)B.restoreRow.call(q,p);else{var b=b.savedRow,c=r.rows[b.id];B.restoreCell.call(q,b.id,b.ic);a(c.cells[b.ic]).removeClass("edit-cell "+Z);a(c).addClass(Z).attr({"aria-selected":"true",tabindex:"0"})}}function D(b,c){var d=c[1].length-1;0===b?a("#pData",l).addClass(T):void 0!==c[1][b-1]&&S(a("#"+G(c[1][b-1])),T)?a("#pData",l).addClass(T):a("#pData",l).removeClass(T);b===d?
a("#nData",l).addClass(T):void 0!==c[1][b+1]&&S(a("#"+G(c[1][b+1])),T)?a("#nData",l).addClass(T):a("#nData",l).removeClass(T)}function d(){var b=B.getDataIDs.call(q),c=a("#id_g",E).val();return[a.inArray(c,b),b]}var r=this,q=a(r),t=r.p;if(r.grid&&null!=t&&p){var C=t.id,I=B.getGridRes,J=B.setSelection,b=a.extend(!0,{top:0,left:0,width:300,datawidth:"auto",height:"auto",dataheight:"auto",drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,
beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:M.call(this,"overlay"),removemodal:!0,skipPostTypes:["image","file"]},
I.call(q,"edit"),u.edit,t.formEditing||{},Q||{}),y="FrmGrid_"+C,K=y,x="TblGrid_"+C,E="#"+G(x),l=E+"_2",L={themodal:"editmod"+C,modalhead:"edithd"+C,modalcontent:"editcnt"+C,resizeAlso:y},z="#"+G(L.themodal),F=t.gBox,O=t.colModel,da=t.iColByName,R=1,W=0,k,aa,A,H=b.commonIconClass,V=function(){u.hideModal(z,{gb:F,jqm:b.jqModal,onClose:b.onClose,removemodal:b.removemodal})},ea=I.call(q,"errors.errcap"),X=function(){var c=a.makeArray(arguments);c.unshift("");c.unshift("AddEdit");c.unshift(b);return ja.apply(r,
c)},pa=P.call(r,"hover"),T=P.call(r,"disabled"),Z=P.call(r,"select"),oa=P.call(r,"active"),Y=P.call(r,"error");a(z).remove();y="#"+G(y);"new"===p?(p="_empty",A="add",b.caption=b.addCaption):(b.caption=b.editCaption,A="edit");var ia=!0;!b.checkOnUpdate||!0!==b.jqModal&&void 0!==b.jqModal||b.modal||(ia=!1);var fa=isNaN(b.dataheight)?b.dataheight:b.dataheight+"px",ba=isNaN(b.datawidth)?b.datawidth:b.datawidth+"px",K=a("<form name='FormPost' id='"+K+"' class='FormGrid' onSubmit='return false;' style='width:"+
ba+";overflow:auto;position:relative;height:"+fa+";'></form>").data("disabled",!1),ga=a("<table id='"+x+"' class='EditTable'"+(u.msie&&8>u.msiever()?" cellspacing='0'":"")+"><tbody></tbody></table>");a(O).each(function(){var a=this.formoptions;R=Math.max(R,a?a.colpos||0:0);W=Math.max(W,a?a.rowpos||0:0)});a(K).append(ga);Y=a("<tr id='FormError' style='display:none'><td class='"+Y+"' colspan='"+2*R+"'>&#160;</td></tr>");Y[0].rp=0;a(ga).append(Y);Y=a("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+
2*R+"'>"+(b.topinfo||"&#160;")+"</td></tr>");Y[0].rp=0;a(ga).append(Y);if(X("beforeInitData",K,A)){w();fa=(Y="rtl"===t.direction?!0:!1)?"nData":"pData";ba=Y?"pData":"nData";v(p,ga,R);var fa=N.call(r,fa,"",U(H,b.prevIcon),"","left"),ba=N.call(r,ba,"",U(H,b.nextIcon),"","right"),la=N.call(r,"sData",b.bSubmit),ma=N.call(r,"cData",b.bCancel),x="<div class='"+M.call(r,"dialog.footer")+"'><table"+(u.msie&&8>u.msiever()?" cellspacing='0'":"")+" class='EditTable' id='"+x+"_2'><tbody><tr><td colspan='2'><hr class='"+
M.call(r,"dialog.hr")+"' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton navButton-"+t.direction+"'>"+(Y?ba+fa:fa+ba)+"</td><td class='EditButton EditButton-"+t.direction+"'>"+la+"&#160;"+ma+"</td></tr>",x=x+("<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+(b.bottominfo||"&#160;")+"</td></tr>"),x=x+"</tbody></table></div>";if(0<W){var na=[];a.each(a(ga)[0].rows,function(a,b){na[a]=b});na.sort(function(a,b){return a.rp>b.rp?1:a.rp<b.rp?-1:0});a.each(na,
function(b,c){a("tbody",ga).append(c)})}b.gbox=F;var qa=!1;!0===b.closeOnEscape&&(b.closeOnEscape=!1,qa=!0);x=a("<div></div>").append(a("<div class='"+M.call(r,"dialog.body")+"'></div>").append(K)).append(x);u.createModal.call(r,L,x,b,t.gView,a(F)[0]);b.topinfo&&a(".tinfo",E).show();b.bottominfo&&a(".binfo",l).show();x=x=null;a(z).keydown(function(c){var d=(c.target.tagName||"").toUpperCase(),e,g;if(!0===a(y).data("disabled"))return!1;if(13===c.which&&"TEXTAREA"!==d){e=a(l).find(":focus");g=e.attr("id");
if(0<e.length&&0<=a.inArray(g,["pData","nData","cData"]))return e.trigger("click"),!1;if(!0===b.savekey[0]&&13===b.savekey[1])return a("#sData",l).trigger("click"),!1}if(!0===b.savekey[0]&&c.which===b.savekey[1]&&"TEXTAREA"!==d)return a("#sData",l).trigger("click"),!1;if(27===c.which){if(!f())return!1;qa&&V();return!1}if(!0===b.navkeys[0]){if("_empty"===a("#id_g",E).val())return!0;if(c.which===b.navkeys[1])return a("#pData",l).trigger("click"),!1;if(c.which===b.navkeys[2])return a("#nData",l).trigger("click"),
!1}});b.checkOnUpdate&&(a("a.ui-jqdialog-titlebar-close span",z).removeClass("jqmClose"),a("a.ui-jqdialog-titlebar-close",z).unbind("click").click(function(){if(!f())return!1;V();return!1}));ca(a("#sData",l),b.saveicon,H);ca(a("#cData",l),b.closeicon,H);if(b.checkOnSubmit||b.checkOnUpdate)la=N.call(r,"sNew",b.bYes),ba=N.call(r,"nNew",b.bNo),ma=N.call(r,"cNew",b.bExit),L=b.zIndex||999,L++,a("<div class='"+b.overlayClass+" jqgrid-overlay confirm' style='z-index:"+L+";display:none;'>&#160;</div><div class='"+
M.call(r,"dialog.content","confirm ui-jqconfirm")+"' style='z-index:"+(L+1)+"'>"+b.saveData+"<br/><br/>"+la+ba+ma+"</div>").insertAfter(y),a("#sNew",z).click(function(){g();a(y).data("disabled",!1);a(".confirm",z).hide();return!1}),a("#nNew",z).click(function(){a(".confirm",z).hide();a(y).data("disabled",!1);setTimeout(function(){a(":input:visible",y)[0].focus()},0);return!1}),a("#cNew",z).click(function(){a(".confirm",z).hide();a(y).data("disabled",!1);V();return!1});X("onInitializeForm",a(y),A);
"_empty"!==p&&b.viewPagerButtons?a("#pData,#nData",l).show():a("#pData,#nData",l).hide();X("beforeShowForm",a(y),A);a(z).data("onClose",b.onClose);u.viewModal.call(r,z,{gbox:F,jqm:b.jqModal,overlay:b.overlay,modal:b.modal,overlayClass:b.overlayClass,toTop:b.toTop,onHide:function(a){a.w.remove();a.o&&a.o.remove()}});ia||a("."+G(b.overlayClass)).click(function(){if(!f())return!1;V();return!1});a(".fm-button",z).hover(function(){a(this).addClass(pa)},function(){a(this).removeClass(pa)});a("#sData",l).click(function(){k=
{};a("#FormError",E).hide();e();"_empty"===k[C+"_id"]?g():!0===b.checkOnSubmit?(aa=h(k,b._savedData))?(a(y).data("disabled",!0),a(".confirm",z).show()):g():g();return!1});a("#cData",l).click(function(){if(!f())return!1;V();return!1});a("#nData",l).click(function(){if(!f())return!1;a("#FormError",E).hide();var b=d();b[0]=parseInt(b[0],10);if(-1!==b[0]&&b[1][b[0]+1]){if(!X("onclickPgButtons","next",a(y),b[1][b[0]]))return!1;m(b[1][b[0]+1],y);J.call(q,b[1][b[0]+1]);X("afterclickPgButtons","next",a(y),
b[1][b[0]+1]);D(b[0]+1,b)}return!1});a("#pData",l).click(function(){if(!f())return!1;a("#FormError",E).hide();var b=d();if(-1!==b[0]&&b[1][b[0]-1]){if(!X("onclickPgButtons","prev",a(y),b[1][b[0]])||S(a("#"+G(b[1][b[0]-1])),T))return!1;m(b[1][b[0]-1],y);J.call(q,b[1][b[0]-1]);X("afterclickPgButtons","prev",a(y),b[1][b[0]-1]);D(b[0]-1,b)}return!1});X("afterShowForm",a(y),A);ia=d();D(ia[0],ia)}}})},viewGridRow:function(p,Q){return this.each(function(){function e(){!0!==d.closeOnEscape&&!0!==d.navkeys[0]||
setTimeout(function(){a("#cData").focus()},0)}function v(b,c,e){var g,k,l,m=0,r,p,t=[],v=B.getInd.call(f,b),q;q=M.call(h,"dialog.viewData","DataTD form-view-data");var x=M.call(h,"dialog.viewLabel","CaptionTD form-view-label"),z="<td class='"+x+"' width='"+d.labelswidth+"'>&#160;</td><td class='"+q+" ui-helper-reset'>&#160;</td>",y="",x="<td class='"+x+"'></td><td class='"+q+"'></td>",F=["integer","number","currency"],L=0,D=0,n,C,E;for(q=1;q<=e;q++)y+=1===q?z:x;a(K).each(function(){(k=this.editrules&&
!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1)||"right"!==this.align||(this.formatter&&-1!==a.inArray(this.formatter,F)?L=Math.max(L,parseInt(this.width,10)):D=Math.max(D,parseInt(this.width,10)))});n=0!==L?L:0!==D?D:0;a(K).each(function(b){g=this.name;C=!1;p=(k=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1)?"style='display:none'":"";E="boolean"!==typeof this.viewable?!0:this.viewable;if("cb"!==g&&"subgrid"!==g&&"rn"!==g&&E){r=!1===v?"":u.getDataFieldOfCell.call(h,
h.rows[v],b).html();C="right"===this.align&&0!==n?!0:!1;var d=a.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),f=parseInt(d.rowpos,10)||m+1,A=parseInt(2*(parseInt(d.colpos,10)||1),10);if(d.rowabove){var q=a("<tr><td class='contentinfo' colspan='"+2*e+"'>"+d.rowcontent+"</td></tr>");a(c).append(q);q[0].rp=f}l=a(c).find("tr[data-rowpos="+f+"]");0===l.length&&(l=a("<tr "+p+" data-rowpos='"+f+"'></tr>").addClass("FormData").attr("id","trv_"+g),a(l).append(y),a(c).append(l),l[0].rp=f);d=void 0===
d.label?w.colNames[b]:d.label;f=a("td:eq("+(A-1)+")",l[0]);a("td:eq("+(A-2)+")",l[0]).html("<b>"+(d||"&nbsp;")+"</b>");f[ha(f.html())?"html":"append"]("<span>"+(r||"&nbsp;")+"</span>").attr("id","v_"+g);C&&a("td:eq("+(A-1)+") span",l[0]).css({"text-align":"right",width:n+"px"});t[m]=b;m++}});0<m&&(b=a("<tr class='FormData' style='display:none'><td class='CaptionTD'>&#160;</td><td colspan='"+(2*e-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+b+"'/></td></tr>"),
b[0].rp=m+99,a(c).append(b));return t}function m(b){var c,d,e=0,g=B.getInd.call(f,b,!0),l;g&&(a("td",g).each(function(b){l=K[b];c=l.name;d=l.editrules&&!0===l.editrules.edithidden?!1:!0===l.hidden?!0:!1;"cb"!==c&&"subgrid"!==c&&"rn"!==c&&(c=G("v_"+c),a("#"+c+" span",q).html(u.getDataFieldOfCell.call(h,g,b).html()),d&&a("#"+c,q).parents("tr:first").hide(),e++)}),0<e&&a("#id_g",q).val(b))}function c(b,c){var d=c[1].length-1;0===b?a("#pData",t).addClass(F):void 0!==c[1][b-1]&&S(a("#"+G(c[1][b-1])),F)?
a("#pData",t).addClass(F):a("#pData",t).removeClass(F);b===d?a("#nData",t).addClass(F):void 0!==c[1][b+1]&&S(a("#"+G(c[1][b+1])),F)?a("#nData",t).addClass(F):a("#nData",t).removeClass(F)}function g(){var b=B.getDataIDs.call(f),c=a("#id_g",q).val();return[a.inArray(c,b),b]}var h=this,f=a(h),w=h.p;if(h.grid&&null!=w&&p){var D=w.id,d=a.extend(!0,{top:0,left:0,width:0,datawidth:"auto",height:"auto",dataheight:"auto",drag:!0,resize:!0,closeOnEscape:!1,labelswidth:"30%",navkeys:[!1,38,40],onClose:null,
beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,removemodal:!0},B.getGridRes.call(f,"view"),u.view||{},w.formViewing||{},Q||{}),r="#ViewGrid_"+G(D),q="#ViewTbl_"+G(D),t=q+"_2",C="ViewGrid_"+D,I="ViewTbl_"+D,J=d.commonIconClass,D={themodal:"viewmod"+D,modalhead:"viewhd"+D,modalcontent:"viewcnt"+D,resizeAlso:C},b="#"+G(D.themodal),y=w.gBox,K=w.colModel,x=1,E=0,l=function(){var b=a.makeArray(arguments);b.unshift("");b.unshift("View");b.unshift(d);return ja.apply(h,b)},L=function(){u.hideModal(b,
{gb:y,jqm:d.jqModal,onClose:d.onClose,removemodal:d.removemodal})},z=P.call(h,"hover"),F=P.call(h,"disabled"),O=isNaN(d.dataheight)?d.dataheight:d.dataheight+"px",da=isNaN(d.datawidth)?d.datawidth:d.datawidth+"px",C=a("<div class='"+M.call(h,"dialog.body")+"'><form name='FormPost' id='"+C+"' class='FormGrid' style='width:"+da+";overflow:auto;position:relative;height:"+O+";'></form></div>"),O=C.children("form.FormGrid"),R=a("<table id='"+I+"' class='EditTable' cellspacing='1' cellpadding='2' border='0' style='table-layout:fixed'><tbody></tbody></table>");
a(b).remove();a(K).each(function(){var a=this.formoptions;x=Math.max(x,a?a.colpos||0:0);E=Math.max(E,a?a.rowpos||0:0)});O.append(R);if(l("beforeInitData",O)){v(p,R,x);var W=(O="rtl"===w.direction?!0:!1)?"pData":"nData",da=N.call(h,O?"nData":"pData","",U(J,d.prevIcon),"","left"),W=N.call(h,W,"",U(J,d.nextIcon),"","right"),k=N.call(h,"cData",d.bClose);if(0<E){var aa=[];a.each(a(R)[0].rows,function(a,b){aa[a]=b});aa.sort(function(a,b){return a.rp>b.rp?1:a.rp<b.rp?-1:0});a.each(aa,function(b,c){a("tbody",
R).append(c)})}d.gbox=y;I=a("<div></div>").append(C).append("<div class='"+M.call(h,"dialog.footer")+"'><table border='0' class='EditTable' id='"+I+"_2'><tbody><tr id='Act_Buttons'><td class='navButton navButton-"+w.direction+"' width='"+(d.labelswidth||"auto")+"'>"+(O?W+da:da+W)+"</td><td class='EditButton EditButton-"+w.direction+"'>"+k+"</td></tr></tbody></table></div>");u.createModal.call(h,D,I,d,w.gView,a(w.gView)[0]);d.viewPagerButtons||a("#pData, #nData",t).hide();I=null;a(b).keydown(function(b){var c,
e;if(!0===a(r).data("disabled"))return!1;if(13===b.which&&(c=a(t).find(":focus"),e=c.attr("id"),0<c.length&&0<=a.inArray(e,["pData","nData","cData"])))return c.trigger("click"),!1;if(27===b.which)return d.closeOnEscape&&L(),!1;if(!0===d.navkeys[0]){if(b.which===d.navkeys[1])return a("#pData",t).trigger("click"),!1;if(b.which===d.navkeys[2])return a("#nData",t).trigger("click"),!1}});ca(a("#cData",t),d.closeicon,J);l("beforeShowForm",a(r));u.viewModal.call(h,b,{gbox:y,jqm:d.jqModal,overlay:d.overlay,
toTop:d.toTop,modal:d.modal,onHide:function(a){a.w.remove();a.o&&a.o.remove()}});a(".fm-button:not(."+F.split(" ").join(".")+")",t).hover(function(){a(this).addClass(z)},function(){a(this).removeClass(z)});e();a("#cData",t).click(function(){L();return!1});a("#nData",t).click(function(){a("#FormError",q).hide();var b=g();b[0]=parseInt(b[0],10);if(-1!==b[0]&&b[1][b[0]+1]){if(!l("onclickPgButtons","next",a(r),b[1][b[0]]))return!1;m(b[1][b[0]+1]);B.setSelection.call(f,b[1][b[0]+1]);l("afterclickPgButtons",
"next",a(r),b[1][b[0]+1]);c(b[0]+1,b)}e();return!1});a("#pData",t).click(function(){a("#FormError",q).hide();var b=g();if(-1!==b[0]&&b[1][b[0]-1]){if(!l("onclickPgButtons","prev",a(r),b[1][b[0]]))return!1;m(b[1][b[0]-1]);B.setSelection.call(f,b[1][b[0]-1]);l("afterclickPgButtons","prev",a(r),b[1][b[0]-1]);c(b[0]-1,b)}e();return!1});J=g();c(J[0],J)}}})},delGridRow:function(p,Q){return this.each(function(){var e=this,v=e.p,m=a(e);if(e.grid&&null!=v&&p){var c=v.id,g=a.extend(!0,{top:0,left:0,width:240,
removemodal:!0,height:"auto",dataheight:"auto",datawidth:"auto",drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,closeOnEscape:!1,delData:{},onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},B.getGridRes.call(m,"del"),u.del||{},v.formDeleting||{},Q||{}),h="DelTbl_"+c,f="#DelTbl_"+G(c),w,D,d,r,q={themodal:"delmod"+c,modalhead:"delhd"+c,modalcontent:"delcnt"+
c,resizeAlso:h},t="#"+G(q.themodal),C=v.gBox,I=g.commonIconClass,J=function(){var b=a.makeArray(arguments);b.unshift("");b.unshift("Delete");b.unshift(g);return ja.apply(e,b)},b=P.call(e,"hover"),y=P.call(e,"active"),K=P.call(e,"error");a.isArray(p)||(p=[String(p)]);if(void 0!==a(t)[0]){if(!J("beforeInitData",a(f)))return;a("#DelData>td",f).text(p.join()).data("rowids",p);a("#DelError",f).hide();!0===g.processing&&(g.processing=!1,a("#dData",f).removeClass(y));J("beforeShowForm",a(f));u.viewModal.call(e,
t,{gbox:C,jqm:g.jqModal,jqM:!1,overlay:g.overlay,toTop:g.toTop,modal:g.modal})}else{var x=isNaN(g.dataheight)?g.dataheight:g.dataheight+"px",E=isNaN(g.datawidth)?g.datawidth:g.datawidth+"px",x="<div class='"+M.call(e,"dialog.body")+"'><div id='"+h+"' class='formdata' style='width:"+E+";overflow:auto;position:relative;height:"+x+";'>",x=x+"<table class='DelTable'><tbody>"+("<tr id='DelError' style='display:none'><td class='"+K+"'></td></tr>"),x=x+("<tr id='DelData' style='display:none'><td >"+p.join()+
"</td></tr>"),x=x+("<tr><td class='delmsg' style='white-space:pre;'>"+g.msg+"</td></tr>"),x=x+"</tbody></table></div></div>",K=N.call(e,"dData",g.bSubmit),E=N.call(e,"eData",g.bCancel),x=x+("<div class='"+M.call(e,"dialog.footer")+"'><table"+(u.msie&&8>u.msiever()?" cellspacing='0'":"")+" class='EditTable' id='"+h+"_2'><tbody><tr><td><hr class='"+M.call(e,"dialog.hr")+"' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton EditButton-"+v.direction+"'>"+K+"&#160;"+E+"</td></tr></tbody></table></div>");
g.gbox=C;u.createModal.call(e,q,x,g,v.gView,a(v.gView)[0]);a("#DelData>td",f).data("rowids",p);if(!J("beforeInitData",a(x)))return;a(".fm-button",f+"_2").hover(function(){a(this).addClass(b)},function(){a(this).removeClass(b)});ca(a("#dData",f+"_2"),g.delicon,I);ca(a("#eData",f+"_2"),g.cancelicon,I);a("#dData",f+"_2").click(function(){var b=[!0,""],h,p=a("#DelData>td",f),q=p.text(),x=p.data("rowids"),p={};a.isFunction(g.onclickSubmit)&&(p=g.onclickSubmit.call(e,g,q)||{});a.isFunction(g.beforeSubmit)&&
(b=g.beforeSubmit.call(e,q)||b);if(b[0]&&!g.processing){g.processing=!0;d=v.prmNames;w=a.extend({},g.delData,p);r=d.oper;w[r]=d.deloper;D=d.id;q=x.slice();if(!q.length)return!1;for(h in q)q.hasOwnProperty(h)&&(q[h]=u.stripPref(v.idPrefix,q[h]));w[D]=q.join();a(this).addClass(y);h=g.url||v.editurl;h=a.extend({url:a.isFunction(h)?h.call(e,w[D],w,g):h,type:g.mtype,data:a.isFunction(g.serializeDelData)?g.serializeDelData.call(e,w):w,complete:function(c,d){var h;a("#dData",f+"_2").removeClass(y);300<=
c.status&&304!==c.status||0===c.status&&4===c.readyState?(b[0]=!1,a.isFunction(g.errorTextFormat)?b[1]=g.errorTextFormat.call(e,c):b[1]=d+" Status: '"+c.statusText+"'. Error code: "+c.status):a.isFunction(g.afterSubmit)&&(b=g.afterSubmit.call(e,c,w)||[!0]);if(!1===b[0])a("#DelError>td",f).html(b[1]),a("#DelError",f).show();else{if(g.reloadAfterSubmit&&"local"!==v.datatype)m.trigger("reloadGrid",[a.extend({},g.reloadGridOptions||{})]);else if(!0===v.treeGrid)try{B.delTreeNode.call(m,x[0])}catch(k){}else for(x=
x.slice(),h=0;h<x.length;h++)B.delRowData.call(m,x[h]);setTimeout(function(){J("afterComplete",c,q,a(f))},50)}g.processing=!1;b[0]&&u.hideModal(t,{gb:C,jqm:g.jqModal,onClose:g.onClose,removemodal:g.removemodal})}},u.ajaxOptions,g.ajaxDelOptions);h.url||g.useDataProxy||(a.isFunction(v.dataProxy)?g.useDataProxy=!0:(b[0]=!1,b[1]+=" "+u.errors.nourl));b[0]&&(g.useDataProxy?(h=v.dataProxy.call(e,h,"del_"+c),void 0===h&&(h=[!0,""]),!1===h[0]?(b[0]=!1,b[1]=h[1]||"Error deleting the selected row!"):u.hideModal(t,
{gb:C,jqm:g.jqModal,onClose:g.onClose,removemodal:g.removemodal})):"clientArray"===h.url?(w=h.data,h.complete({status:200,statusText:""},"")):a.ajax(h))}!1===b[0]&&(a("#DelError>td",f).html(b[1]),a("#DelError",f).show());return!1});a("#eData",f+"_2").click(function(){u.hideModal(t,{gb:C,jqm:g.jqModal,onClose:g.onClose,removemodal:g.removemodal});return!1});J("beforeShowForm",a(f));u.viewModal.call(e,t,{gbox:C,jqm:g.jqModal,overlay:g.overlay,toTop:g.toTop,modal:g.modal})}J("afterShowForm",a(f));!0===
g.closeOnEscape&&setTimeout(function(){a(".ui-jqdialog-titlebar-close","#"+G(q.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(p,Q,e,v,m,c,g){"object"===typeof p&&(g=c,c=m,m=v,v=e,e=Q,Q=p,p=void 0);v=v||{};e=e||{};g=g||{};m=m||{};c=c||{};return this.each(function(){var h=this,f=h.p,w=a(h);if(h.grid&&null!=f&&!(h.nav&&0<a(p).find(".navtable").length)){var D=f.id,d=a.extend({edit:!0,add:!0,del:!0,search:!0,refresh:!0,refreshstate:"firstpage",view:!1,closeOnEscape:!0,beforeRefresh:null,
afterRefresh:null,cloneToTop:!1,hideEmptyPagerParts:!0,alertwidth:200,alertheight:"auto",alerttop:null,removemodal:!0,alertleft:null,alertzIndex:null,iconsOverText:!1},B.getGridRes.call(w,"nav"),u.nav||{},f.navOptions||{},Q||{});d.position=d.position||("rtl"===f.direction?"right":"left");var r,q=f.idSel,t=f.gBox,C=d.commonIconClass,I={themodal:"alertmod_"+D,modalhead:"alerthd_"+D,modalcontent:"alertcnt_"+D},J=function(){return function(){var b=document.documentElement,c=window,e=1024,g=768,k=w.closest(".ui-jqgrid").offset();
void 0===a("#"+G(I.themodal))[0]&&(d.alerttop||d.alertleft||(void 0!==c.innerWidth?(e=c.innerWidth,g=c.innerHeight):null!=b&&void 0!==b.clientWidth&&0!==b.clientWidth&&(e=b.clientWidth,g=b.clientHeight),e=e/2-parseInt(d.alertwidth,10)/2-k.left,g=g/2-25-k.top),u.createModal.call(h,I,"<div class='"+M.call(h,"dialog.body")+"'><div>"+d.alerttext+"</div></div>",{gbox:t,jqModal:d.jqModal,drag:!0,resize:!0,caption:d.alertcap,top:null!=d.alerttop?d.alerttop:g,left:null!=d.alertleft?d.alertleft:e,width:d.alertwidth,
height:d.alertheight,closeOnEscape:d.closeOnEscape,zIndex:d.alertzIndex,removemodal:d.removemodal},f.gView,a(t)[0],!1));u.viewModal.call(h,"#"+G(I.themodal),{gbox:t,toTop:d.alertToTop,jqm:d.jqModal});var l=a("#"+G(I.modalhead)).find(".ui-jqdialog-titlebar-close");l.attr({tabindex:"0",href:"#",role:"button"});setTimeout(function(){l.focus()},50)}}(),b,y=function(b){if(13===b.which&&(b=a(this).find(".ui-pg-button").filter(":focus"),0<b.length)){var c=b[0].id,c=c.substr(0,0<a(this).closest(".ui-jqgrid-toppager").length?
c.length-D.length-5:c.length-D.length-1)+"mod"+f.id,d=a(".ui-jqdialog").filter(":visible").map(function(){return this.id});if(0>a.inArray(c,d))return b.trigger("click"),!1}},K=P.call(h,"hover"),x=P.call(h,"disabled"),E=M.call(h,"navButton","ui-pg-button");if(h.grid){h.modalAlert=J;void 0===p&&(f.pager?(p=f.pager,f.toppager&&(d.cloneToTop=!0)):f.toppager&&(p=f.toppager));var l=1,L,z,F,O,N,R=["left","center","right"],W="<div class='"+M.call(h,"navButton","ui-pg-button "+P.call(h,"disabled"))+"'><span class='ui-separator'></span></div>",
k=function(){S(this,x)||a(this).addClass(K)},aa=function(){a(this).removeClass(K)},A=function(){S(this,x)||(a.isFunction(d.addfunc)?d.addfunc.call(h):B.editGridRow.call(w,"new",v));return!1},H=function(b,c,d){if(!S(this,x)){var e=f.selrow;e?a.isFunction(b)?b.call(h,e):B[c].call(w,e,d):J()}return!1},V=function(){return H.call(this,d.editfunc,"editGridRow",e)},ea=function(){return H.call(this,d.viewfunc,"viewGridRow",g)},X=function(){var b;S(this,x)||(f.multiselect?(b=f.selarrrow,0===b.length&&(b=null)):
b=f.selrow,b?a.isFunction(d.delfunc)?d.delfunc.call(h,b):B.delGridRow.call(w,b,m):J());return!1},ca=function(){S(this,x)||(a.isFunction(d.searchfunc)?d.searchfunc.call(h,c):B.searchGrid.call(w,c));return!1},T=function(){if(!S(this,x)){a.isFunction(d.beforeRefresh)&&d.beforeRefresh.call(h);f.search=!1;f.resetsearch=!0;try{if("currentfilter"!==d.refreshstate){f.postData.filters="";try{a("#fbox_"+q).jqFilter("resetFilter")}catch(b){}a.isFunction(h.clearToolbar)&&h.clearToolbar(!1)}}catch(b){}switch(d.refreshstate){case "firstpage":w.trigger("reloadGrid",
[a.extend({},d.reloadGridOptions||{},{page:1})]);break;case "current":case "currentfilter":w.trigger("reloadGrid",[a.extend({},d.reloadGridOptions||{},{current:!0})])}a.isFunction(d.afterRefresh)&&d.afterRefresh.call(h)}return!1},Z=function(b,c,e,f,g){var h=a("<div class='"+E+"' tabindex='0' role='button'></div>"),l=d[b+"icon"],m=a.trim(d[b+"text"]);h.append("<div class='ui-pg-div'><span class='"+(d.iconsOverText?U("ui-pg-button-icon-over-text",C,l):U(C,l))+"'></span>"+(m?"<span class='ui-pg-button-text"+
(d.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+m+"</span>":"")+"</div>");a(f).append(h);h.attr({title:d[b+"title"]||"",id:c||b+"_"+g}).click(e).hover(k,aa);return h};d.cloneToTop&&f.toppager&&(l=2);for(L=0;L<l;L++){b=a("<div class='ui-pg-table navtable' role='toolbar' style='float:"+("rtl"===f.direction?"right":"left")+";table-layout:auto;'></div>");0===L?(z=p,F=D,z===f.toppager&&(F+="_top",l=1)):(z=f.toppager,F=D+"_top");d.add&&Z("add",v.id,A,b,F);d.edit&&Z("edit",e.id,V,b,F);d.view&&Z("view",
g.id,ea,b,F);d.del&&Z("del",m.id,X,b,F);(d.add||d.edit||d.del||d.view)&&a(b).append(W);d.search&&(r=Z("search",c.id,ca,b,F),c.showOnLoad&&!0===c.showOnLoad&&a(r,b).click());d.refresh&&Z("refresh","",T,b,F);r=a(".ui-jqgrid>.ui-jqgrid-view").css("font-size")||"11px";a("body").append("<div id='testpg2' class='"+M.call(h,"gBox","ui-jqgrid")+"' style='font-size:"+r+";visibility:hidden;' ></div>");r=a(b).clone().appendTo("#testpg2").width();a("#testpg2").remove();a(z+"_"+d.position,z).append(b);if(d.hideEmptyPagerParts)for(F=
0;F<R.length;F++)R[F]!==d.position&&(N=a(z+"_"+R[F],z),0===N.length||0===N[0].childNodes.length?N.hide():1===N[0].childNodes.length&&(O=N[0].firstChild,!a(O).is("table.ui-pg-table")||0!==O.rows&&0!==O.rows[0].cells.length||N.hide()));f._nvtd&&(r>f._nvtd[0]&&(a(z+"_"+d.position,z).width(r),f._nvtd[0]=r),f._nvtd[1]=r);h.nav=!0;b.bind("keydown.jqGrid",y)}w.triggerHandler("jqGridResetFrozenHeights")}}})},navButtonAdd:function(p,Q){"object"===typeof p&&(Q=p,p=void 0);return this.each(function(){var e=
this,v=e.p;if(e.grid){var m=a.extend({caption:"newButton",title:"",onClickButton:null,position:"last",cursor:"pointer",iconsOverText:!1},B.getGridRes.call(a(e),"nav"),u.nav||{},v.navOptions||{},Q||{}),c=P.call(e,"hover"),g=P.call(e,"disabled"),h=M.call(e,"navButton","ui-pg-button");if(void 0===p)if(v.pager)if(B.navButtonAdd.call(a(e),v.pager,m),v.toppager)p=v.toppager;else return;else v.toppager&&(p=v.toppager);"string"===typeof p&&0!==p.indexOf("#")&&(p="#"+G(p));var v=a(".navtable",p),f=m.commonIconClass;
if(0<v.length&&!(m.id&&0<v.find("#"+G(m.id)).length)){var w=a("<div tabindex='0' role='button'></div>");"NONE"===m.buttonicon.toString().toUpperCase()?a(w).addClass(h).append("<div class='ui-pg-div'>"+(m.caption?"<span class='ui-pg-button-text"+(m.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+m.caption+"</span>":"")+"</div>"):a(w).addClass(h).append("<div class='ui-pg-div'><span class='"+(m.iconsOverText?U("ui-pg-button-icon-over-text",f,m.buttonicon):U(f,m.buttonicon))+"'></span>"+(m.caption?
"<span class='ui-pg-button-text"+(m.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+m.caption+"</span>":"")+"</div>");m.id&&a(w).attr("id",m.id);"first"===m.position&&0<v.children("div.ui-pg-button").length?v.children("div.ui-pg-button").first().before(w):v.append(w);a(w,v).attr("title",m.title||"").click(function(c){S(this,g)||a.isFunction(m.onClickButton)&&m.onClickButton.call(e,m,c);return!1}).hover(function(){S(this,g)||a(this).addClass(c)},function(){a(this).removeClass(c)});a(e).triggerHandler("jqGridResetFrozenHeights")}}})},
navSeparatorAdd:function(p,u){u=a.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},u||{});return this.each(function(){if(this.grid){var e=this.p,v=M.call(this,"navButton","ui-pg-button "+P.call(this,"disabled"));if(void 0===p)if(e.pager)if(B.navSeparatorAdd.call(a(this),e.pager,u),e.toppager)p=e.toppager;else return;else e.toppager&&(p=e.toppager);"string"===typeof p&&0!==p.indexOf("#")&&(p="#"+G(p));e=a(".navtable",p);0<e.length&&(v="<div class='"+v+"'><span class='"+u.sepclass+"'></span>"+
u.sepcontent+"</div>","first"===u.position?0===e.children("div.ui-pg-button").length?e.append(v):e.children("div.ui-pg-button").first().before(v):e.append(v))}})},GridToForm:function(p,u){return this.each(function(){var e,v,m,c;if(this.grid){var g=B.getRowData.call(a(this),p);if(g)for(e in g)if(g.hasOwnProperty(e))if(v=a("[name="+G(e)+"]",u),v.is("input:radio")||v.is("input:checkbox"))for(m=0;m<v.length;m++)c=a(v[m]),c.prop("checked",c.val()===String(g[e]));else v.val(ha(g[e])?"":g[e])}})},FormToGrid:function(p,
u,e,v){return this.each(function(){if(this.grid){e||(e="set");v||(v="first");var m=a(u).serializeArray(),c={};a.each(m,function(a,e){c[e.name]=e.value});"add"===e?B.addRowData.call(a(this),p,c,v):"set"===e&&B.setRowData.call(a(this),p,c)}})}})});
//# sourceMappingURL=grid.formedit.map
