(function(a){"function"===typeof define&&define.amd?define(["jquery","./grid.base","./jquery.fmatter","./grid.common"],a):"object"===typeof exports?a(require("jquery")):a(jQuery)})(function(a){var C=a.jgrid,S=C.jqID,N=a.fn.jqGrid,F=N.getGuiStyles,V=N.getGridRes;C.extend({getColProp:function(a){var b=this[0];return null!=b&&b.grid&&(a=b.p.iColByName[a],void 0!==a)?b.p.colModel[a]:{}},setColProp:function(e,b){return this.each(function(){var d=this.p,c;this.grid&&null!=d&&b&&(c=d.iColByName[e],void 0!==
c&&a.extend(!0,d.colModel[c],b))})},sortGrid:function(a,b,d){return this.each(function(){var c=this.grid,g=this.p,f=g.colModel,l=f.length,k,h,m=!1;if(c)for(a||(a=g.sortname),"boolean"!==typeof b&&(b=!1),h=0;h<l;h++)if(k=f[h],k.index===a||k.name===a){!0===g.frozenColumns&&!0===k.frozen&&(m=c.fhDiv.find("#"+g.id+"_"+a));m&&0!==m.length||(m=c.headers[h].el);c=k.sortable;("boolean"!==typeof c||c)&&this.sortData("jqgh_"+g.id+"_"+a,h,b,d,m);break}})},clearBeforeUnload:function(){return this.each(function(){var e=
this.p,b=this.grid,d,c=C.clearArray,g=Object.prototype.hasOwnProperty;a.isFunction(b.emptyRows)&&b.emptyRows.call(this,!0,!0);a(document).unbind("mouseup.jqGrid"+e.id);a(b.hDiv).unbind("mousemove");a(this).unbind();var f,l=b.headers.length;for(f=0;f<l;f++)b.headers[f].el=null;for(d in b)b.hasOwnProperty(d)&&(b.propOrMethod=null);b="formatCol sortData updatepager refreshIndex setHeadCheckBox constructTr clearToolbar fixScrollOffsetAndhBoxPadding rebuildRowIndexes modalAlert toggleToolbar triggerToolbar formatter addXmlData addJSONData ftoolbar _inlinenav nav grid p".split(" ");
l=b.length;for(f=0;f<l;f++)g.call(this,b[f])&&(this[b[f]]=null);this._index={};c(e.data);c(e.lastSelectedData);c(e.selarrrow);c(e.savedRow)})},GridDestroy:function(){return this.each(function(){var e=this.p;if(this.grid&&null!=e){e.pager&&a(e.pager).remove();try{a("#alertmod_"+e.idSel).remove(),a(this).jqGrid("clearBeforeUnload"),a(e.gBox).remove()}catch(b){}}})},GridUnload:function(){return this.each(function(){var e=a(this),b=this.p,d=a.fn.jqGrid;this.grid&&(e.removeClass(d.getGuiStyles.call(e,
"grid","ui-jqgrid-btable")),b.pager&&a(b.pager).empty().removeClass(d.getGuiStyles.call(e,"pagerBottom","ui-jqgrid-pager")).removeAttr("style").removeAttr("dir"),e.jqGrid("clearBeforeUnload"),e.removeAttr("style").removeAttr("tabindex").removeAttr("role").removeAttr("aria-labelledby").removeAttr("style"),e.empty(),e.insertBefore(b.gBox).show(),a(b.pager).insertBefore(b.gBox).show(),a(b.gBox).remove())})},setGridState:function(e){return this.each(function(){var b=this.p,d=this.grid,c=d.cDiv,g=a(d.uDiv),
f=a(d.ubDiv);if(d&&null!=b){var d=N.getIconRes.call(this,"gridMinimize.visible"),l=N.getIconRes.call(this,"gridMinimize.hidden");"hidden"===e?(a(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv",b.gView).slideUp("fast"),b.pager&&a(b.pager).slideUp("fast"),b.toppager&&a(b.toppager).slideUp("fast"),!0===b.toolbar[0]&&("both"===b.toolbar[1]&&f.slideUp("fast"),g.slideUp("fast")),b.footerrow&&a(".ui-jqgrid-sdiv",b.gBox).slideUp("fast"),a(".ui-jqgrid-titlebar-close span",c).removeClass(d).addClass(l),b.gridstate="hidden"):
"visible"===e&&(a(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv",b.gView).slideDown("fast"),b.pager&&a(b.pager).slideDown("fast"),b.toppager&&a(b.toppager).slideDown("fast"),!0===b.toolbar[0]&&("both"===b.toolbar[1]&&f.slideDown("fast"),g.slideDown("fast")),b.footerrow&&a(".ui-jqgrid-sdiv",b.gBox).slideDown("fast"),a(".ui-jqgrid-titlebar-close span",c).removeClass(l).addClass(d),b.gridstate="visible")}})},filterToolbar:function(e){return this.each(function(){var b=this,d=b.grid,c=a(b),g=b.p,f=C.bindEv,l=C.info_dialog,
k=C.htmlEncode;if(!this.ftoolbar){var h=a.extend(!0,{autosearch:!0,autosearchDelay:500,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:!1,groupOp:"AND",defaultSearch:"bw",searchOperators:!1,resetIcon:"x",applyLabelClasses:!0,loadFilterDefaults:!0,operands:{eq:"==",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^","in":"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#"}},C.search,g.searching||{},e||{}),m=g.colModel,u=function(a){return V.call(c,
a)},O=u("errors.errcap"),L=u("edit.bClose"),G=u("edit.msg"),v=F.call(b,"states.hover"),D=F.call(b,"states.select"),J=F.call(b,"filterToolbar.dataField"),I,p=function(a){return"gs_"+g.idPrefix+a},A=function(){var b;b=g.postData.filters;var c={},d,e,r=g.iColByName,f,n;"string"===typeof b&&(b=a.parseJSON(b));d=(b||{}).rules;if(!(null==b||b.groupOp.toUpperCase()!==h.groupOp.toUpperCase()||null==d||0===d.length||null!=b.groups&&0<b.groups.length)){for(b=0;b<d.length;b++){e=d[b];f=m[r[e.field]];if(null==
f||!1===f.search)return;n=f.searchoptions||{};if(n.sopt){if(0>a.inArray(e.op,n.sopt))return}else if("select"===f.stype){if("eq"!==e.op)return}else if(e.op!==h.defaultSearch)return;c[f.name]={op:e.op,data:e.data}}return c}},B=function(){var e={},U=0,r={};a.each(m,function(){var c=this,n=c.index||c.name,f,l;f=c.searchoptions||{};var K=a("#"+p(c.name),!0===c.frozen&&!0===g.frozenColumns?d.fhDiv:d.hDiv),k=function(a,b){var d=c.formatoptions||{};return void 0!==d[a]?d[a]:u("formatter."+(b||c.formatter)+
"."+a)},x=function(a){var b=k("thousandsSeparator").replace(/([\.\*\_\'\(\)\{\}\+\?\\])/g,"\\$1");return a.replace(new RegExp(b,"g"),"")};l=h.searchOperators?K.parent().prev().children("a").data("soper")||h.defaultSearch:f.sopt?f.sopt[0]:"select"===c.stype?"eq":h.defaultSearch;if("custom"===c.stype&&a.isFunction(f.custom_value)&&0<K.length&&"SPAN"===K[0].nodeName.toUpperCase())f=f.custom_value.call(b,K.children(".customelement").first(),"get");else if("select"===c.stype)f=K.val();else switch(f=a.trim(K.val()),
c.formatter){case "integer":f=x(f).replace(k("decimalSeparator","number"),".");""!==f&&(f=String(parseInt(f,10)));break;case "number":f=x(f).replace(k("decimalSeparator"),".");""!==f&&"0"===String(f).charAt(0)&&(f=String(parseFloat(f)));break;case "currency":var K=k("prefix"),w=k("suffix");K&&K.length&&(f=f.substr(K.length));w&&w.length&&(f=f.substr(0,f.length-w.length));f=x(f).replace(k("decimalSeparator"),".");""!==f&&(f=String(parseFloat(f)))}if(f||"nu"===l||"nn"===l)e[n]=f,r[n]=l,U++;else try{delete g.postData[n]}catch(X){}});
var f=0<U?!0:!1;if(h.stringResult||h.searchOperators||"local"===g.datatype){var n='{"groupOp":"'+h.groupOp+'","rules":[',l=0;a.each(e,function(a,b){0<l&&(n+=",");n+='{"field":"'+a+'",';n+='"op":"'+r[a]+'",';n+='"data":"'+(b+"").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';l++});n+="]}";a.extend(g.postData,{filters:n});a.each(["searchField","searchString","searchOper"],function(a,b){g.postData.hasOwnProperty(b)&&delete g.postData[b]})}else a.extend(g.postData,e);var k;g.searchurl&&(k=g.url,c.jqGrid("setGridParam",
{url:g.searchurl}));var x="stop"===c.triggerHandler("jqGridToolbarBeforeSearch")?!0:!1;!x&&a.isFunction(h.beforeSearch)&&(x=h.beforeSearch.call(b));x||c.jqGrid("setGridParam",{search:f}).trigger("reloadGrid",[a.extend({page:1},h.reloadGridSearchOptions||{})]);k&&c.jqGrid("setGridParam",{url:k});c.triggerHandler("jqGridToolbarAfterSearch");a.isFunction(h.afterSearch)&&h.afterSearch.call(b)},M=u("search.odata")||[],r=g.customSortOperations,n=function(d,f,e){a("#sopt_menu").remove();f=parseInt(f,10);
e=parseInt(e,10)+18;var n,l=0,x=[],W=a(d).data("soper"),l=a(d).data("colname"),H=a(".ui-jqgrid-view").css("font-size")||"11px";f="<ul id='sopt_menu' class='"+F.call(b,"searchToolbar.menu","ui-search-menu")+"' role='menu' tabindex='0' style='z-index:9999;display:block;font-size:"+H+";left:"+f+"px;top:"+e+"px;'>";l=g.iColByName[l];if(void 0!==l){l=m[l];e=a.extend({},l.searchoptions);var q,t;e.sopt||(e.sopt=[],e.sopt[0]="select"===l.stype?"eq":h.defaultSearch);a.each(M,function(){x.push(this.oper)});
null!=r&&a.each(r,function(a){x.push(a)});for(l=0;l<e.sopt.length;l++)H=e.sopt[l],n=a.inArray(H,x),-1!==n&&(n=M[n],void 0!==n?(t=h.operands[H],q=n.text):null!=r&&(q=r[H],t=q.operand,q=q.text),n=W===H?D:"",f+='<li class="ui-menu-item '+n+'" role="presentation"><a class="ui-corner-all g-menu-item" tabindex="0" role="menuitem" value="'+k(H)+'" data-oper="'+k(t)+'"><table><tr><td style="width:25px">'+k(t)+"</td><td>"+k(q)+"</td></tr></table></a></li>");f+="</ul>";a("body").append(f);a("#sopt_menu").addClass("ui-menu ui-widget ui-widget-content ui-corner-all");
a("#sopt_menu > li > a").hover(function(){a(this).addClass(v)},function(){a(this).removeClass(v)}).click(function(){var b=a(this).attr("value"),f=a(this).data("oper");c.triggerHandler("jqGridToolbarSelectOper",[b,f,d]);a("#sopt_menu").hide();a(d).text(f).data("soper",b);!0===h.autosearch&&(f=a(d).parent().next().children()[0],(a(f).val()||"nu"===b||"nn"===b)&&B())})}},x,R=a("<tr></tr>",{"class":"ui-search-toolbar",role:"row"});h.loadFilterDefaults&&(I=A());a.each(m,function(c){var d,e;e="";var n,
k,w=this.searchoptions,m=this.editoptions,H=a("<th></th>",{"class":F.call(b,"colHeaders","ui-th-column ui-th-"+g.direction+" "+(h.applyLabelClasses?this.labelClasses||"":""))}),q=a("<div></div>"),t=a("<table class='ui-search-table'><tr><td class='ui-search-oper'></td><td class='ui-search-input'></td><td class='ui-search-clear' style='width:1px'></td></tr></table>");!0===this.hidden&&a(H).css("display","none");this.search=!1===this.search?!1:!0;void 0===this.stype&&(this.stype="text");d=a.extend({mode:"filter"},
w||{});if(this.search){if(h.searchOperators){e=g.search&&null!=I[this.name]?I[this.name].op:d.sopt?d.sopt[0]:"select"===this.stype?"eq":h.defaultSearch;for(k=0;k<M.length;k++)if(M[k].oper===e){n=h.operands[e]||"";break}if(void 0===n&&null!=r)for(var T in r)if(r.hasOwnProperty(T)&&T===e){n=r[T].operand;break}void 0===n&&(n="=");e="<a title='"+(null!=d.searchtitle?d.searchtitle:u("search.operandTitle"))+"' data-soper='"+e+"' class='"+F.call(b,"searchToolbar.operButton","soptclass")+"' data-colname='"+
this.name+"'>"+n+"</a>"}a("td",t).first().data("colindex",c).append(e);null!=d.sopt&&1!==d.sopt.length||a("td.ui-search-oper",t).hide();g.search&&null!=I[this.name]&&(d.defaultValue=I[this.name].data);void 0===d.clearSearch&&(d.clearSearch="text"===this.stype?!0:!1);d.clearSearch?(e=u("search.resetTitle")||"Clear Search Value",a("td",t).eq(2).append("<a title='"+e+"' class='"+F.call(b,"searchToolbar.clearButton","clearsearchclass")+"'><span>"+h.resetIcon+"</span></a>")):a("td",t).eq(2).hide();switch(this.stype){case "select":if(e=
this.surl||d.dataUrl)a(q).append(t),a.ajax(a.extend({url:e,context:{stbl:t,options:d,cm:this,iCol:c},dataType:"html",success:function(a,c,e){c=this.cm;var n=this.iCol,g=this.options,r=this.stbl.find(">tbody>tr>td.ui-search-input");void 0!==g.buildSelect?(a=g.buildSelect.call(b,a,e,c,n))&&r.append(a):r.append(a);a=r.children("select");0===a.find("option[value='']").length&&"string"===typeof d.noFilterText&&(z=document.createElement("option"),z.value="",z.innerHTML=d.noFilterText,a.prepend(z));void 0!==
g.defaultValue&&a.val(g.defaultValue);a.attr({name:c.index||c.name,id:p(c.name)});g.attr&&a.attr(g.attr);a.addClass(J);a.css({width:"100%"});f.call(b,a[0],g);C.fullBoolFeedback.call(b,g.selectFilled,"jqGridSelectFilled",{elem:a[0],options:g,cm:c,cmName:c.name,iCol:n,mode:"filter"});!0===h.autosearch&&a.change(function(){B();return!1})}},C.ajaxOptions,g.ajaxSelectOptions||{}));else{var E,A,P;w?(E=(void 0===w.value?"":w.value)||m.value,A=(void 0===w.separator?":":w.separator)||m.separator,P=(void 0===
w.delimiter?";":w.delimiter)||m.delimiter):m&&(E=void 0===m.value?"":m.value,A=void 0===m.separator?":":m.separator,P=void 0===m.delimiter?";":m.delimiter);if(E){var y=document.createElement("select");y.style.width="100%";a(y).attr({name:this.index||this.name,id:p(this.name)});var z,D,N;if("string"===typeof E)for(e=E.split(P),P=0;P<e.length;P++)E=e[P].split(A),z=document.createElement("option"),z.value=E[0],""===E[0]&&(N=!0),z.innerHTML=E[1],y.appendChild(z);else if("object"===typeof E)for(D in E)E.hasOwnProperty(D)&&
(z=document.createElement("option"),z.value=D,""===D&&(N=!0),z.innerHTML=E[D],y.appendChild(z));N||"string"!==typeof d.noFilterText||(z=document.createElement("option"),z.value="",z.innerHTML=d.noFilterText,a(y).prepend(z));void 0!==d.defaultValue&&a(y).val(d.defaultValue);d.attr&&a(y).attr(d.attr);a(y).addClass(J);a(q).append(t);f.call(b,y,d);a("td",t).eq(1).append(y);C.fullBoolFeedback.call(b,d.selectFilled,"jqGridSelectFilled",{elem:y,options:w||m||{},cm:this,cmName:this.name,iCol:c,mode:"filter"});
!0===h.autosearch&&a(y).change(function(){B();return!1})}}break;case "text":c=void 0!==d.defaultValue?d.defaultValue:"";a("td",t).eq(1).append("<input type='text' class='"+J+"' name='"+(this.index||this.name)+"' id='"+p(this.name)+"' value='"+c+"'/>");a(q).append(t);d.attr&&a("input",q).attr(d.attr);f.call(b,a("input",q)[0],d);!0===h.autosearch&&(h.searchOnEnter?a("input",q).keypress(function(a){return 13===(a.charCode||a.keyCode||0)?(B(),!1):this}):a("input",q).keydown(function(a){switch(a.which){case 13:return!1;
case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:x&&clearTimeout(x),x=setTimeout(function(){B()},h.autosearchDelay)}}));break;case "custom":a("td",t).eq(1).append("<span style='width:100%;padding:0;box-sizing:border-box;' class='"+J+"' name='"+(this.index||this.name)+"' id='"+p(this.name)+"'/>");a(q).append(t);try{if(a.isFunction(d.custom_element))if(y=d.custom_element.call(b,void 0!==d.defaultValue?d.defaultValue:"",d))y=a(y).addClass("customelement"),a(q).find("span[name='"+
(this.index||this.name)+"']").append(y);else throw"e2";else throw"e1";}catch(Q){"e1"===Q&&l.call(b,O,"function 'custom_element' "+G.nodefined,L),"e2"===Q?l.call(b,O,"function 'custom_element' "+G.novalue,L):l.call(b,O,"string"===typeof Q?Q:Q.message,L)}}}a(H).append(q);a(H).find(".ui-search-oper .soptclass,.ui-search-clear .clearsearchclass").hover(function(){a(this).addClass(v)},function(){a(this).removeClass(v)});a(R).append(H);h.searchOperators||a("td",t).eq(0).hide()});a(d.hDiv).find(">div>.ui-jqgrid-htable>thead").append(R);
h.searchOperators&&(a(".soptclass",R).click(function(b){var c=a(this).offset();n(this,c.left,c.top);b.stopPropagation()}),a("body").on("click",function(b){"soptclass"!==b.target.className&&a("#sopt_menu").hide()}));a(".clearsearchclass",R).click(function(){var b=a(this).parents("tr").first(),c=parseInt(a("td.ui-search-oper",b).data("colindex"),10),d=a.extend({},m[c].searchoptions||{}).defaultValue||"";"select"===m[c].stype?d?a("td.ui-search-input select",b).val(d):a("td.ui-search-input select",b)[0].selectedIndex=
0:a("td.ui-search-input input",b).val(d);!0===h.autosearch&&B()});b.ftoolbar=!0;b.triggerToolbar=B;b.clearToolbar=function(e){var f={},n=0,r;e="boolean"!==typeof e?!0:e;a.each(m,function(){var c,e=a("#"+p(this.name),!0===this.frozen&&!0===g.frozenColumns?d.fhDiv:d.hDiv),h,l=this.searchoptions||{};void 0!==l.defaultValue&&(c=l.defaultValue);r=this.index||this.name;switch(this.stype){case "select":h=0<e.length?!e[0].multiple:!0;e.find("option").each(function(b){this.selected=0===b&&h;if(a(this).val()===
c)return this.selected=!0,!1});if(void 0!==c)f[r]=c,n++;else try{delete g.postData[r]}catch(k){}break;case "text":e.val(c||"");if(void 0!==c)f[r]=c,n++;else try{delete g.postData[r]}catch(k){}break;case "custom":a.isFunction(l.custom_value)&&0<e.length&&"SPAN"===e[0].nodeName.toUpperCase()&&l.custom_value.call(b,e.children(".customelement").first(),"set",c||"")}});var l=0<n?!0:!1;g.resetsearch=!0;if(h.stringResult||h.searchOperators||"local"===g.datatype){var k='{"groupOp":"'+h.groupOp+'","rules":[',
x=0;a.each(f,function(a,b){0<x&&(k+=",");k+='{"field":"'+a+'",';k+='"op":"eq",';k+='"data":"'+(b+"").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';x++});k+="]}";a.extend(g.postData,{filters:k});a.each(["searchField","searchString","searchOper"],function(a,b){g.postData.hasOwnProperty(b)&&delete g.postData[b]})}else a.extend(g.postData,f);var B;g.searchurl&&(B=g.url,c.jqGrid("setGridParam",{url:g.searchurl}));var q="stop"===c.triggerHandler("jqGridToolbarBeforeClear")?!0:!1;!q&&a.isFunction(h.beforeClear)&&
(q=h.beforeClear.call(b));q||e&&c.jqGrid("setGridParam",{search:l}).trigger("reloadGrid",[a.extend({page:1},h.reloadGridResetOptions||{})]);B&&c.jqGrid("setGridParam",{url:B});c.triggerHandler("jqGridToolbarAfterClear");a.isFunction(h.afterClear)&&h.afterClear()};b.toggleToolbar=function(){var b=a("tr.ui-search-toolbar",d.hDiv),e=!0===g.frozenColumns?a("tr.ui-search-toolbar",d.fhDiv):!1;"none"===b.css("display")?(b.show(),e&&e.show()):(b.hide(),e&&e.hide());!0===g.frozenColumns&&(c.jqGrid("destroyFrozenColumns"),
c.jqGrid("setFrozenColumns"))};!0===g.frozenColumns&&(c.jqGrid("destroyFrozenColumns"),c.jqGrid("setFrozenColumns"));c.bind("jqGridRefreshFilterValues.filterToolbar"+(h.loadFilterDefaults?"jqGridAfterLoadComplete.filterToolbar":""),function(){var b,c,d=A(),e=this.p,f;if(e||e.search){for(b in d)d.hasOwnProperty(b)&&(c=d[b],f=a("#"+p(b)),f.val(c.data),f=f.closest(".ui-search-input").siblings(".ui-search-oper").children(".soptclass"),f.data("soper",c.op),f.text(h.operands[c.op]));for(c=0;c<e.colModel.length;c++)b=
e.colModel[c].name,d.hasOwnProperty(b)||a("#"+p(b)).val("")}})}})},destroyFilterToolbar:function(){return this.each(function(){this.ftoolbar&&(this.toggleToolbar=this.clearToolbar=this.triggerToolbar=null,this.ftoolbar=!1,a(this.grid.hDiv).find("table thead tr.ui-search-toolbar").remove(),!0===this.p.frozenColumns&&a(this).jqGrid("destroyFrozenColumns").jqGrid("setFrozenColumns"))})},destroyGroupHeader:function(e){void 0===e&&(e=!0);return this.each(function(){var b,d,c,g;b=this.grid;var f=this.p.colModel,
l=a("table.ui-jqgrid-htable thead",b.hDiv);if(b){a(this).unbind(".setGroupHeaders");var k=a("<tr>",{role:"row"}).addClass("ui-jqgrid-labels"),h=b.headers;b=0;for(d=h.length;b<d;b++){c=f[b].hidden?"none":"";c=a(h[b].el).width(h[b].width).css("display",c);try{c.removeAttr("rowSpan")}catch(m){c.attr("rowSpan",1)}k.append(c);g=c.children("span.ui-jqgrid-resize");0<g.length&&(g[0].style.height="");c.children("div")[0].style.top=""}a(l).children("tr.ui-jqgrid-labels").remove();a(l).prepend(k);!0===e&&a(this).jqGrid("setGridParam",
{groupHeader:null})}})},setGroupHeaders:function(e){e=a.extend({useColSpanStyle:!1,applyLabelClasses:!0,groupHeaders:[]},e||{});return this.each(function(){this.p.groupHeader=e;var b,d,c=0,g,f,l,k,h,m,u=this.p,O=u.colModel,L=O.length,G=this.grid.headers,v=a("table.ui-jqgrid-htable",this.grid.hDiv),D=C.isCellClassHidden,J=v.children("thead").children("tr.ui-jqgrid-labels"),I=J.last().addClass("jqg-second-row-header");g=v.children("thead");var p=v.find(".jqg-first-row-header");void 0===p[0]?p=a("<tr>",
{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):p.empty();var A=function(a,b){var c=b.length,d;for(d=0;d<c;d++)if(b[d].startColumnName===a)return d;return-1};a(this).prepend(g);g=a("<tr>",{role:"row"}).addClass("ui-jqgrid-labels jqg-third-row-header");for(b=0;b<L;b++)if(l=G[b].el,k=a(l),d=O[b],f={height:"0",width:G[b].width+"px",display:d.hidden?"none":""},a("<th>",{role:"gridcell"}).css(f).addClass("ui-first-th-"+u.direction+(e.applyLabelClasses?" "+(d.labelClasses||
""):"")).appendTo(p),l.style.width="",f=F.call(this,"colHeaders","ui-th-column-header ui-th-"+u.direction+" "+(e.applyLabelClasses?d.labelClasses||"":"")),h=A(d.name,e.groupHeaders),0<=h){h=e.groupHeaders[h];c=h.numberOfColumns;m=h.titleText;for(h=d=0;h<c&&b+h<L;h++)O[b+h].hidden||D(O[b+h].classes)||a(G[b+h].el).is(":hidden")||d++;f=a("<th>").addClass(f).css({height:"22px","border-top":"0 none"}).html(m);0<d&&f.attr("colspan",String(d));u.headertitles&&f.attr("title",f.text());0===d&&f.hide();k.before(f);
g.append(l);--c}else 0===c?e.useColSpanStyle?k.attr("rowspan",J.length+1):(a("<th>").addClass(f).css({display:d.hidden?"none":"","border-top":"0 none"}).insertBefore(k),g.append(l)):(g.append(l),c--);u=a(this).children("thead");u.prepend(p);g.insertAfter(I);v.prepend(u);e.useColSpanStyle&&(v.find("span.ui-jqgrid-resize").each(function(){var b=a(this).parent();b.is(":visible")&&(this.style.cssText="height:"+b.height()+"px !important;cursor:col-resize;")}),v.find(".ui-th-column>div").each(function(){var b=
a(this),c=b.parent();c.is(":visible")&&c.is(":has(span.ui-jqgrid-resize)")&&!b.hasClass("ui-jqgrid-rotate")&&!b.hasClass("ui-jqgrid-rotateOldIE")&&b.css("top",(c.height()-b.outerHeight(!0))/2+"px")}));a(this).triggerHandler("jqGridAfterSetGroupHeaders")})},getNumberOfFrozenColumns:function(){var a=this;if(0===a.length)return 0;var a=a[0],a=a.p.colModel,b=a.length,d=-1,c;for(c=0;c<b&&!0===a[c].frozen;c++)d=c;return d+1},setFrozenColumns:function(){return this.each(function(){var e=this,b=a(e),d=e.p,
c=e.grid;if(c&&null!=d&&!0!==d.frozenColumns){var g=d.colModel,f,l=g.length,k=-1,h=!1,m=[],u=S(d.id),C=F.call(e,"states.hover"),L=F.call(e,"states.disabled");if(!0!==d.subGrid&&!0!==d.treeGrid&&!d.scroll){for(f=0;f<l&&!0===g[f].frozen;f++)h=!0,k=f,m.push("#jqgh_"+u+"_"+S(g[f].name));d.sortable&&(g=a(c.hDiv).find(".ui-jqgrid-htable .ui-jqgrid-labels"),g.sortable("destroy"),b.jqGrid("setGridParam",{sortable:{options:{items:0<m.length?">th:not(:has("+m.join(",")+"),:hidden)":">th:not(:hidden)"}}}),b.jqGrid("sortableColumns",
g));if(0<=k&&h){h=d.caption?a(c.cDiv).outerHeight():0;m=a(".ui-jqgrid-htable",d.gView).height();d.toppager&&(h+=a(c.topDiv).outerHeight());!0===d.toolbar[0]&&"bottom"!==d.toolbar[1]&&(h+=a(c.uDiv).outerHeight());c.fhDiv=a("<div style='position:absolute;overflow:hidden;"+("rtl"===d.direction?"right:0;border-top-left-radius:0;":"left:0;border-top-right-radius:0;")+"top:"+h+"px;height:"+m+"px;' class='"+F.call(e,"hDiv","frozen-div ui-jqgrid-hdiv")+"'></div>");c.fbDiv=a("<div style='position:absolute;overflow:hidden;"+
("rtl"===d.direction?"right:0;":"left:0;")+"top:"+(parseInt(h,10)+parseInt(m,10)+1)+"px;overflow:hidden;' class='frozen-bdiv ui-jqgrid-bdiv'></div>");a(d.gView).append(c.fhDiv);g=a(".ui-jqgrid-htable",d.gView).clone(!0);l=g[0].tHead.rows;if(d.groupHeader){a(l[0].cells).filter(":gt("+k+")").remove();a(l).filter(".jqg-third-row-header").each(function(){a(this).children("th[id]").each(function(){var b=a(this).attr("id");b&&b.substr(0,e.id.length+1)===e.id+"_"&&(b=b.substr(e.id.length+1),d.iColByName[b]>
k&&a(this).remove())})});var G=-1,v=-1,D,J;a(l).filter(".jqg-second-row-header").children("th").each(function(){D=parseInt(a(this).attr("colspan")||1,10);J=parseInt(a(this).attr("rowspan")||1,10);1<J?(G++,v++):D&&(G+=D,v++);if(G===k)return!1});G!==k&&(v=k);a(l).filter(".jqg-second-row-header,.ui-search-toolbar").each(function(){a(this).children(":gt("+v+")").remove()})}else a(l).each(function(){a(this).children(":gt("+k+")").remove()});a(g).width(1);a(c.fhDiv).append(g).mousemove(function(a){if(c.resizing)return c.dragMove(a),
!1}).scroll(function(){this.scrollLeft=0});d.footerrow&&(g=a(".ui-jqgrid-bdiv",d.gView).height(),c.fsDiv=a("<div style='position:absolute;"+("rtl"===d.direction?"right:0;":"left:0;")+"top:"+(parseInt(h,10)+parseInt(m,10)+parseInt(g,10)+1)+"px;' class='frozen-sdiv ui-jqgrid-sdiv'></div>"),a(d.gView).append(c.fsDiv),h=a(".ui-jqgrid-ftable",d.gView).clone(!0),a("tr",h).each(function(){a("td:gt("+k+")",this).remove()}),a(h).width(1),a(c.fsDiv).append(h));b.bind("jqGridSortCol.setFrozenColumns",function(b,
e,f){b=a("tr.ui-jqgrid-labels:last th:eq("+d.lastsort+")",c.fhDiv);e=a("tr.ui-jqgrid-labels:last th:eq("+f+")",c.fhDiv);a("span.ui-grid-ico-sort",b).addClass(L);a(b).attr("aria-selected","false");a("span.ui-icon-"+d.sortorder,e).removeClass(L);a(e).attr("aria-selected","true");d.viewsortcols[0]||d.lastsort===f||(a("span.s-ico",b).hide(),a("span.s-ico",e).show())});a(d.gView).append(c.fbDiv);a(c.bDiv).scroll(function(){a(c.fbDiv).scrollTop(a(this).scrollTop())});!0===d.hoverrows&&a(d.idSel).unbind("mouseover").unbind("mouseout");
var I=function(a,b){var c=a.height();1<=Math.abs(c-b)&&0<b&&(a.height(b),c=a.height(),1<=Math.abs(b-c)&&a.height(b+Math.round(b-c)))},p=function(a,b){var c=a.width();1<=Math.abs(c-b)&&(a.width(b),c=a.width(),1<=Math.abs(b-c)&&a.width(b+Math.round(b-c)))},A=function(b,c,e,g){var h,l,k,m,u,w,p;p=a(c).position().top;var v,q,t;if(null!=b&&0<b.length){b[0].scrollTop=c.scrollTop;b.css("rtl"===d.direction?{top:p,right:0}:{top:p,left:0});l=b.children("table").children("thead").children("tr");k=a(c).children("div").children("table").children("thead").children("tr");
0===k.length&&(l=a(b.children("table")[0].rows),k=a(a(c).children("div").children("table")[0].rows));h=Math.min(l.length,k.length);v=0<h?a(l[0]).position().top:0;q=0<h?a(k[0]).position().top:0;if(0<=e)for(0<=g&&(h=Math.min(g+1,h));e<h;e++)if(m=a(k[e]),"none"!==m.css("display")&&m.is(":visible")){p=m.position().top;g=a(l[e]);u=g.position().top;w=m.height();if(null!=d.groupHeader&&d.groupHeader.useColSpanStyle)for(t=m[0].cells,f=0;f<t.length;f++)m=t[f],null!=m&&"TH"===m.nodeName.toUpperCase()&&(w=Math.max(w,
a(m).height()));p=w+(p-q)+(v-u);I(g,p)}I(b,c.clientHeight)}},h={resizeDiv:!0,resizedRows:{iRowStart:0,iRowEnd:-1}},B={header:h,resizeFooter:!0,body:h};b.bind("jqGridAfterGridComplete.setFrozenColumns",function(){a(d.idSel+"_frozen").remove();a(c.fbDiv).height(c.hDiv.clientHeight);var e=a(this).clone(!0),f=e[0].rows,g=b[0].rows;a(f).filter("tr[role=row]").each(function(){a(this.cells).filter("td[role=gridcell]:gt("+k+")").remove()});c.fbRows=f;e.width(1).attr("id",d.id+"_frozen");e.appendTo(c.fbDiv);
if(!0===d.hoverrows){var h=function(b,c,d){a(b)[c](C);a(d[b.rowIndex])[c](C)};a(f).filter(".jqgrow").hover(function(){h(this,"addClass",g)},function(){h(this,"removeClass",g)});a(g).filter(".jqgrow").hover(function(){h(this,"addClass",f)},function(){h(this,"removeClass",f)})}A(c.fhDiv,c.hDiv,0,-1);A(c.fbDiv,c.bDiv,0,-1);c.sDiv&&A(c.fsDiv,c.sDiv,0,-1)});var M=function(b){a(c.fbDiv).scrollTop(a(c.bDiv).scrollTop());b.header.resizeDiv&&A(c.fhDiv,c.hDiv,b.header.iRowStart,b.header.iRowEnd);b.body.resizeDiv&&
A(c.fbDiv,c.bDiv,b.body.iRowStart,b.body.iRowEnd);b.resizeFooter&&c.sDiv&&b.resizeFooter&&A(c.fsDiv,c.sDiv,0,-1);var d=c.fhDiv[0].clientWidth;b.header.resizeDiv&&null!=c.fhDiv&&1<=c.fhDiv.length&&I(a(c.fhDiv),c.hDiv.clientHeight);b.body.resizeDiv&&null!=c.fbDiv&&0<c.fbDiv.length&&p(a(c.fbDiv),d);b.resizeFooter&&null!=c.fsDiv&&0<=c.fsDiv.length&&p(a(c.fsDiv),d)};a(d.gBox).bind("resizestop.setFrozenColumns",function(){setTimeout(function(){M(B)},50)});b.bind("jqGridInlineEditRow.setFrozenColumns jqGridInlineAfterRestoreRow.setFrozenColumns jqGridInlineAfterSaveRow.setFrozenColumns jqGridAfterEditCell.setFrozenColumns jqGridAfterRestoreCell.setFrozenColumns jqGridAfterSaveCell.setFrozenColumns jqGridResizeStop.setFrozenColumns",
function(a,c){var d=b.jqGrid("getInd",c);M({header:{resizeDiv:!1,resizedRows:{iRowStart:-1,iRowEnd:-1}},resizeFooter:!0,body:{resizeDiv:!0,resizedRows:{iRowStart:d,iRowEnd:d}}})});b.bind("jqGridResizeStop.setFrozenColumns",function(){M(B)});b.bind("jqGridResetFrozenHeights.setFrozenColumns",function(a,b){M(b||B)});c.hDiv.loading||b.triggerHandler("jqGridAfterGridComplete");d.frozenColumns=!0}}}})},destroyFrozenColumns:function(){return this.each(function(){var e=a(this),b=this.grid,d=this.p,c=S(d.id);
if(b&&!0===d.frozenColumns){a(b.fhDiv).remove();a(b.fbDiv).remove();b.fhDiv=null;b.fbDiv=null;b.fbRows=null;d.footerrow&&(a(b.fsDiv).remove(),b.fsDiv=null);e.unbind(".setFrozenColumns");if(!0===d.hoverrows){var g,f=F.call(this,"states.hover");e.bind("mouseover",function(b){g=a(b.target).closest("tr.jqgrow");"ui-subgrid"!==a(g).attr("class")&&a(g).addClass(f)}).bind("mouseout",function(b){g=a(b.target).closest("tr.jqgrow");a(g).removeClass(f)})}d.frozenColumns=!1;d.sortable&&(b=a(b.hDiv).find(".ui-jqgrid-htable .ui-jqgrid-labels"),
b.sortable("destroy"),e.jqGrid("setGridParam",{sortable:{options:{items:">th:not(:has(#jqgh_"+c+"_cb,#jqgh_"+c+"_rn,#jqgh_"+c+"_subgrid),:hidden)"}}}),e.jqGrid("sortableColumns",b))}})}})});
//# sourceMappingURL=grid.custom.map
