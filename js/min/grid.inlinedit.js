var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,f,p){if(p.get||p.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[f]=p.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var f=0;return $jscomp.iteratorPrototype(function(){return f<a.length?{done:!1,value:a[f++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(a,f){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var p=0,e={next:function(){if(p<a.length){var u=p++;return{value:f(u,a[u]),done:!1}}e.next=function(){return{done:!0,value:void 0}};return e.next()}};e[Symbol.iterator]=function(){return e};return e};
$jscomp.polyfill=function(a,f,p,e){if(f){p=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var u=a[e];u in p||(p[u]={});p=p[u]}a=a[a.length-1];e=p[a];f=f(e);f!=e&&null!=f&&$jscomp.defineProperty(p,a,{configurable:!0,writable:!0,value:f})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");
$jscomp.findInternal=function(a,f,p){a instanceof String&&(a=String(a));for(var e=a.length,u=0;u<e;u++){var C=a[u];if(f.call(p,C,u,a))return{i:u,v:C}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,p){return $jscomp.findInternal(this,a,p).v}},"es6-impl","es3");
(function(a){"function"===typeof define&&define.amd?define(["jquery","./grid.base","./jquery.fmatter","./grid.common"],a):"object"===typeof exports?a(require("jquery")):a(jQuery)})(function(a){var f=a.jgrid,p=f.fullBoolFeedback,e=f.hasOneFromClasses,u=a.fn.jqGrid,C=function(a){return u.getGuiStyles.call(this,"states."+a)},F=function(d){var m=a.makeArray(arguments).slice(1);m.unshift("");m.unshift("Inline");m.unshift(d);return f.feedback.apply(this,m)};f.inlineEdit=f.inlineEdit||{};f.extend({editRow:function(d,
m,r,g,c,t,e,A,h,b){var k={},v=a.makeArray(arguments).slice(1);"object"===a.type(v[0])?k=v[0]:(void 0!==m&&(k.keys=m),a.isFunction(r)&&(k.oneditfunc=r),a.isFunction(g)&&(k.successfunc=g),void 0!==c&&(k.url=c),null!=t&&(k.extraparam=t),a.isFunction(e)&&(k.aftersavefunc=e),a.isFunction(A)&&(k.errorfunc=A),a.isFunction(h)&&(k.afterrestorefunc=h),a.isFunction(b)&&(k.beforeEditRow=b));return this.each(function(){var b=this,c=a(b),g=b.p,t=0,m=null,r={},n=g.colModel,h=g.prmNames;if(b.grid){var q=a.extend(!0,
{keys:!1,oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,beforeEditRow:null,mtype:"POST",focusField:!0},f.inlineEdit,g.inlineEditing||{},k),e=c.jqGrid("getInd",d,!0),v=q.focusField,A="object"===typeof v&&null!=v?a(v.target||v).closest("tr.jqgrow>td")[0]:null;if(!1!==e&&(q.extraparam[h.oper]===h.addoper||F.call(b,q,"beforeEditRow",q,d))&&"0"===(a(e).attr("editable")||"0")&&!a(e).hasClass("not-editable-row")){h=f.detectRowEditing.call(b,
d);if(null!=h&&"cellEditing"===h.mode){var h=h.savedRow,G=b.rows[h.id],w=C.call(b,"select");c.jqGrid("restoreCell",h.id,h.ic);a(G.cells[h.ic]).removeClass("edit-cell "+w);a(G).addClass(w).attr({"aria-selected":"true",tabindex:"0"})}f.enumEditableCells.call(b,e,a(e).hasClass("jqgrid-new-row")?"add":"edit",function(c){var l=c.cm,k=a(c.dataElement),h=c.dataWidth,e,n=l.name,L=l.edittype,v=c.iCol,q=l.editoptions||{};if("hidden"!==c.editable){try{e=a.unformat.call(this,c.td,{rowId:d,colModel:l},v)}catch(R){e=
"textarea"===L?k.text():k.html()}r[n]=e;k.html("");l=a.extend({},q,{id:d+"_"+n,name:n,rowId:d,mode:c.mode,cm:l,iCol:v});if("&nbsp;"===e||"&#160;"===e||1===e.length&&160===e.charCodeAt(0))e="";e=f.createEl.call(b,L,l,e,!0,a.extend({},f.ajaxOptions,g.ajaxSelectOptions||{}));a(e).addClass("editable");k.append(e);h&&a(e).width(c.dataWidth);f.bindEv.call(b,e,l);"select"===L&&!0===q.multiple&&void 0===q.dataUrl&&f.msie&&a(e).width(a(e).width());null===m&&(m=v);t++}});0<t&&(r.id=d,g.savedRow.push(r),a(e).attr("editable",
"1"),v&&("number"===typeof v&&parseInt(v,10)<=n.length?m=v:"string"===typeof v?m=g.iColByName[v]:null!=A&&(m=A.cellIndex),setTimeout(function(){var d=c.jqGrid("getNumberOfFrozenColumns"),l=function(a){return g.frozenColumns&&0<d&&m<d?b.grid.fbRows[e.rowIndex].cells[a]:e.cells[a]},f=function(b){return a(b).find("input,textarea,select,button,object,*[tabindex]").filter(":input:visible:not(:disabled)")},k=function(){return f(g.frozenColumns&&0<d?b.grid.fbRows[e.rowIndex]:e).first()},h=f(l(m));0<h.length?
h.first().focus():"number"===typeof q.defaultFocusField||"string"===typeof q.defaultFocusField?(h=f(l("number"===typeof q.defaultFocusField?q.defaultFocusField:g.iColByName[q.defaultFocusField])),0===h.length&&(h=k()),h.first().focus()):k().focus()},0)),!0===q.keys&&(n=a(e),g.frozenColumns&&(n=n.add(b.grid.fbRows[e.rowIndex])),n.on("keydown",function(a){if(27===a.keyCode)return c.jqGrid("restoreRow",d,q.afterrestorefunc),!1;if(13===a.keyCode){if("TEXTAREA"===a.target.tagName)return!0;c.jqGrid("saveRow",
d,q);return!1}})),p.call(b,q.oneditfunc,"jqGridInlineEditRow",d,q))}}})},saveRow:function(d,e,r,g,c,t,G,A){var h=a.makeArray(arguments).slice(1),b={},k=this[0],m=a(k),l=null!=k?k.p:null,D,u=f.info_dialog,x=a.isFunction,M=null!=f.defaults&&x(f.defaults.fatalError)?f.defaults.fatalError:alert;if(k.grid&&null!=l){"object"===a.type(h[0])?b=h[0]:(x(e)&&(b.successfunc=e),void 0!==r&&(b.url=r),void 0!==g&&(b.extraparam=g),x(c)&&(b.aftersavefunc=c),x(t)&&(b.errorfunc=t),x(G)&&(b.afterrestorefunc=G),x(A)&&
(b.beforeSaveRow=A));var z=function(a){return m.jqGrid("getGridRes",a)},b=a.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,beforeSaveRow:null,ajaxSaveOptions:{},serializeSaveData:null,mtype:"POST",saveui:"enable",savetext:z("defaults.savetext")||"Saving..."},f.inlineEdit,l.inlineEditing||{},b),n={},J={},q={},E,I,H,h=m.jqGrid("getInd",d,!0),B=a(h),w=l.prmNames,N=z("errors.errcap"),O=z("edit.bClose"),K,P,Q=function(b,c){try{var d=
f.getRelativeRect.call(k,c);u.call(k,N,b,O,{top:d.top,left:d.left+a(k).closest(".ui-jqgrid").offset().left})}catch(R){M(b)}};if(!1!==h&&(D=b.extraparam[w.oper]===w.addoper?"add":"edit",F.call(k,b,"beforeSaveRow",b,d,D)&&(z=B.attr("editable"),b.url=b.url||l.editurl,K="clientArray"!==b.url,"1"===z&&(H=(a.jgrid.detectRowEditing.call(k,d)||{}).savedRow,f.enumEditableCells.call(k,h,B.hasClass("jqgrid-new-row")?"add":"edit",function(b){var c=b.cm,d=c.formatter,l=c.editoptions||{},e=c.formatoptions||{},
h={},g=f.getEditedValue.call(k,a(b.dataElement),c,h,b.editable);"select"===c.edittype&&"select"!==c.formatter&&(J[c.name]=h.text);I=f.checkValues.call(k,g,b.iCol,void 0,void 0,a.extend(b,{oldValue:null!=H?H[c.name]:null,newValue:g,oldRowData:H}));if(null!=I&&!1===I[0])return P=!0,Q(I[1],b.td),!1;"date"===d&&!0!==e.sendFormatted&&(g=a.unformat.date.call(k,g,c));K&&!0===l.NullIfEmpty&&""===g&&(g="null");n[c.name]=g}),!P)))){var y,z=d,w=l.prmNames;y=!1===l.keyName?w.id:l.keyName;n&&(n[w.oper]=w.editoper,
void 0===n[y]||""===n[y]?n[y]=d:h.id!==l.idPrefix+n[y]&&(w=f.stripPref(l.idPrefix,d),void 0!==l._index[w]&&(l._index[n[y]]=l._index[w],delete l._index[w]),d=l.idPrefix+n[y],B.attr("id",d),l.selrow===z&&(l.selrow=d),a.isArray(l.selarrrow)&&(w=a.inArray(z,l.selarrrow),0<=w&&(l.selarrrow[w]=d)),l.multiselect&&(w="jqg_"+l.id+"_"+d,B.find("input.cbox").attr("id",w).attr("name",w))),n=a.extend({},n,l.inlineData||{},b.extraparam));w={options:b,rowid:d,tr:h,iRow:h.rowIndex,savedRow:H,newData:n,mode:D};if(F.call(k,
b,"saveRowValidation",w))if(K)m.jqGrid("progressBar",{method:"show",loadtype:b.saveui,htmlcontent:b.savetext}),q=a.extend({},n,q),q[y]=f.stripPref(l.idPrefix,q[y]),l.autoEncodeOnEdit&&a.each(q,function(a,b){x(b)||(q[a]=f.oldEncodePostedData(b))}),a.ajax(a.extend({url:x(b.url)?b.url.call(k,q[y],D,q,b):b.url,data:f.serializeFeedback.call(k,x(b.serializeSaveData)?b.serializeSaveData:l.serializeRowData,"jqGridInlineSerializeSaveData",q),type:x(b.mtype)?b.mtype.call(k,D,b,q[y],q):b.mtype,complete:function(c,
e){m.jqGrid("progressBar",{method:"hide",loadtype:b.saveui});if((300>c.status||304===c.status)&&(0!==c.status||4!==c.readyState)){var g,h;h=m.triggerHandler("jqGridInlineSuccessSaveRow",[c,d,b]);if(null==h||!0===h)h=[!0,n];h[0]&&x(b.successfunc)&&(h=b.successfunc.call(k,c));a.isArray(h)?(g=h[0],n=h[1]||n):g=h;if(!0===g){l.autoEncodeOnEdit&&a.each(n,function(a,b){n[a]=f.oldDecodePostedData(b)});n=a.extend({},n,J);m.jqGrid("setRowData",d,n);B.attr("editable","0");for(g=0;g<l.savedRow.length;g++)if(String(l.savedRow[g].id)===
String(d)){E=g;break}0<=E&&l.savedRow.splice(E,1);p.call(k,b.aftersavefunc,"jqGridInlineAfterSaveRow",d,c,n,b);B.removeClass("jqgrid-new-row").off("keydown")}else p.call(k,b.errorfunc,"jqGridInlineErrorSaveRow",d,c,e,null,b),!0===b.restoreAfterError&&m.jqGrid("restoreRow",d,b.afterrestorefunc)}},error:function(a,c,l){m.triggerHandler("jqGridInlineErrorSaveRow",[d,a,c,l,b]);if(x(b.errorfunc))b.errorfunc.call(k,d,a,c,l);else{a=a.responseText||a.statusText;try{u.call(k,N,'<div class="'+C.call(k,"error")+
'">'+a+"</div>",O,{buttonalign:"right"})}catch(R){M(a)}}!0===b.restoreAfterError&&m.jqGrid("restoreRow",d,b.afterrestorefunc)}},f.ajaxOptions,l.ajaxRowOptions,b.ajaxSaveOptions||{}));else{n=a.extend({},n,J);D=m.jqGrid("setRowData",d,n);B.attr("editable","0");for(h=0;h<l.savedRow.length;h++)if(String(l.savedRow[h].id)===String(z)){E=h;break}0<=E&&l.savedRow.splice(E,1);p.call(k,b.aftersavefunc,"jqGridInlineAfterSaveRow",d,D,n,b);B.removeClass("jqgrid-new-row").off("keydown")}else w.errorText&&Q(w.errorText,
h)}}},restoreRow:function(d,e){var m=a.makeArray(arguments).slice(1),g={};"object"===a.type(m[0])?g=m[0]:a.isFunction(e)&&(g.afterrestorefunc=e);return this.each(function(){var c=this,e=a(c),m=c.p,r=-1,h={},b;if(c.grid){var k=a.extend(!0,{},f.inlineEdit,m.inlineEditing||{},g),v=e.jqGrid("getInd",d,!0);if(!1!==v&&F.call(c,k,"beforeCancelRow",k,d)){for(b=0;b<m.savedRow.length;b++)if(String(m.savedRow[b].id)===String(d)){r=b;break}if(0<=r){if(a.isFunction(a.fn.datepicker))try{a("input.hasDatepicker",
"#"+f.jqID(v.id)).datepicker("hide")}catch(l){}a.each(m.colModel,function(){var b=this.name;m.savedRow[r].hasOwnProperty(b)&&(h[b]=m.savedRow[r][b],!this.formatter||"date"!==this.formatter||null!=this.formatoptions&&!0===this.formatoptions.sendFormatted||(h[b]=a.unformat.date.call(c,h[b],this)))});e.jqGrid("setRowData",d,h);a(v).attr("editable","0").off("keydown");m.savedRow.splice(r,1);a("#"+f.jqID(d),c).hasClass("jqgrid-new-row")&&setTimeout(function(){e.jqGrid("delRowData",d);e.jqGrid("showAddEditButtons",
!1)},0)}p.call(c,k.afterrestorefunc,"jqGridInlineAfterRestoreRow",d)}}})},addRow:function(d){return this.each(function(){if(this.grid){var e=this,r=a(e),g=e.p,c=a.extend(!0,{rowID:null,initdata:{},position:"first",useDefValues:!0,useFormatter:!1,beforeAddRow:null,addRowParams:{extraparam:{}}},f.inlineEdit,g.inlineEditing||{},d||{});F.call(e,c,"beforeAddRow",c.addRowParams)&&(c.rowID=a.isFunction(c.rowID)?c.rowID.call(e,c):null!=c.rowID?c.rowID:f.randId(),!0===c.useDefValues&&a(g.colModel).each(function(){if(this.editoptions&&
this.editoptions.defaultValue){var d=this.editoptions.defaultValue;c.initdata[this.name]=a.isFunction(d)?d.call(e):d}}),c.rowID=g.idPrefix+c.rowID,r.jqGrid("addRowData",c.rowID,c.initdata,c.position),a("#"+f.jqID(c.rowID),e).addClass("jqgrid-new-row"),c.useFormatter?a("#"+f.jqID(c.rowID)+" .ui-inline-edit",e).click():(g=g.prmNames,c.addRowParams.extraparam[g.oper]=g.addoper,r.jqGrid("editRow",c.rowID,c.addRowParams),r.jqGrid("setSelection",c.rowID)))}})},inlineNav:function(d,m){"object"===typeof d&&
(m=d,d=void 0);return this.each(function(){var r=this,g=a(r),c=r.p;if(this.grid&&null!=c){var t,p=d===c.toppager?c.idSel+"_top":c.idSel,u=d===c.toppager?c.id+"_top":c.id,h=C.call(r,"disabled"),b=a.extend(!0,{edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",save:!0,saveicon:"ui-icon-disk",cancel:!0,cancelicon:"ui-icon-cancel",commonIconClass:"ui-icon",iconsOverText:!1,addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:!0},g.jqGrid("getGridRes","nav"),f.nav||{},
c.navOptions||{},f.inlineNav||{},c.inlineNavOptions||{},m||{});if(void 0===d)if(c.pager)if(g.jqGrid("inlineNav",c.pager,b),c.toppager)d=c.toppager,p=c.idSel+"_top",u=c.id+"_top";else return;else c.toppager&&(d=c.toppager,p=c.idSel+"_top",u=c.id+"_top");if(void 0!==d&&(t=a(d),!(0>=t.length))){0>=t.find(".navtable").length&&g.jqGrid("navGrid",d,{add:!1,edit:!1,del:!1,search:!1,refresh:!1,view:!1});c._inlinenav=!0;if(!0===b.addParams.useFormatter){t=c.colModel;var k,v;for(k=0;k<t.length;k++)if(t[k].formatter&&
"actions"===t[k].formatter){t[k].formatoptions&&(v={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},t=a.extend(v,t[k].formatoptions),b.addParams.addRowParams={keys:t.keys,oneditfunc:t.onEdit,successfunc:t.onSuccess,url:t.url,extraparam:t.extraparam,aftersavefunc:t.afterSave,errorfunc:t.onError,afterrestorefunc:t.afterRestore});break}}b.add&&g.jqGrid("navButtonAdd",d,{caption:b.addtext,title:b.addtitle,commonIconClass:b.commonIconClass,buttonicon:b.addicon,
iconsOverText:b.iconsOverText,id:u+"_iladd",onClickButton:function(){e(this,h)||g.jqGrid("addRow",b.addParams)}});b.edit&&g.jqGrid("navButtonAdd",d,{caption:b.edittext,title:b.edittitle,commonIconClass:b.commonIconClass,buttonicon:b.editicon,iconsOverText:b.iconsOverText,id:u+"_iledit",onClickButton:function(){if(!e(this,h)){var a=c.selrow;a?g.jqGrid("editRow",a,b.editParams):r.modalAlert()}}});b.save&&(g.jqGrid("navButtonAdd",d,{caption:b.savetext,title:b.savetitle,commonIconClass:b.commonIconClass,
buttonicon:b.saveicon,iconsOverText:b.iconsOverText,id:u+"_ilsave",onClickButton:function(){if(!e(this,h)){var d=c.savedRow[0].id;if(d){var k=c.prmNames,m=k.oper,p=b.editParams;a("#"+f.jqID(d),r).hasClass("jqgrid-new-row")?(b.addParams.addRowParams.extraparam[m]=k.addoper,p=b.addParams.addRowParams):(b.editParams.extraparam||(b.editParams.extraparam={}),b.editParams.extraparam[m]=k.editoper);g.jqGrid("saveRow",d,p)}else r.modalAlert()}}}),a(p+"_ilsave").addClass(h));b.cancel&&(g.jqGrid("navButtonAdd",
d,{caption:b.canceltext,title:b.canceltitle,commonIconClass:b.commonIconClass,buttonicon:b.cancelicon,iconsOverText:b.iconsOverText,id:u+"_ilcancel",onClickButton:function(){if(!e(this,h)){var d=c.savedRow[0].id,k=b.editParams;d?(a("#"+f.jqID(d),r).hasClass("jqgrid-new-row")&&(k=b.addParams.addRowParams),g.jqGrid("restoreRow",d,k)):r.modalAlert()}}}),a(p+"_ilcancel").addClass(h));if(!0===b.restoreAfterSelect)g.on("jqGridSelectRow",function(a,d){if(0<c.savedRow.length&&!0===c._inlinenav){var e=c.savedRow[0].id;
d!==e&&"number"!==typeof e&&g.jqGrid("restoreRow",e,b.editParams)}});g.on("jqGridInlineAfterRestoreRow jqGridInlineAfterSaveRow",function(){g.jqGrid("showAddEditButtons",!1)});g.on("jqGridInlineEditRow",function(a,b){g.jqGrid("showAddEditButtons",!0,b)})}}})},showAddEditButtons:function(d){return this.each(function(){if(this.grid){var e=this.p,f=e.idSel,g=C.call(this,"disabled"),c=f+"_ilsave,"+f+"_ilcancel"+(e.toppager?","+f+"_top_ilsave,"+f+"_top_ilcancel":""),e=f+"_iladd,"+f+"_iledit"+(e.toppager?
","+f+"_top_iladd,"+f+"_top_iledit":"");a(d?e:c).addClass(g);a(d?c:e).removeClass(g)}})}})});
//# sourceMappingURL=grid.inlinedit.map
